function buildIOSMeta(){for(var e=[{name:"viewport",content:"width=device-width, height=device-height, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"},{name:"apple-mobile-web-app-capable",content:"yes"},{name:"apple-mobile-web-app-status-bar-style",content:"black"}],t=0;t<e.length;t++){var i=document.createElement("meta"),n=(i.name=e[t].name,i.content=e[t].content,window.document.head.querySelector('meta[name="'+i.name+'"]'));n&&n.parentNode.removeChild(n),window.document.head.appendChild(i)}}function hideIOSFullscreenPanel(){jQuery(".xxx-ios-fullscreen-message").css("display","none"),jQuery(".xxx-ios-fullscreen-scroll").css("display","none"),jQuery(".xxx-game-iframe-full").removeClass("xxx-game-iframe-iphone-se")}function buildIOSFullscreenPanel(){jQuery("body").append('<div class="xxx-ios-fullscreen-message"><div class="xxx-ios-fullscreen-swipe"></div></div><div class="xxx-ios-fullscreen-scroll"></div>')}function showIOSFullscreenPanel(){jQuery(".xxx-ios-fullscreen-message").css("display","block"),jQuery(".xxx-ios-fullscreen-scroll").css("display","block")}function __iosResize(){if(window.scrollTo(0,0),console.log(window.devicePixelRatio),console.log(window.innerWidth),console.log(window.innerHeight),"iPhone"===platform.product)switch(window.devicePixelRatio){case 2:switch(window.innerWidth){case 568:320!==window.innerHeight&&jQuery(".xxx-game-iframe-full").addClass("xxx-game-iframe-iphone-se");break;case 667:(375===window.innerHeight?hideIOSFullscreenPanel:showIOSFullscreenPanel)();break;case 808:(414===window.innerHeight?hideIOSFullscreenPanel:showIOSFullscreenPanel)();break;default:hideIOSFullscreenPanel()}break;case 3:switch(window.innerWidth){case 736:(414===window.innerHeight?hideIOSFullscreenPanel:showIOSFullscreenPanel)();break;case 724:(375===window.innerHeight?hideIOSFullscreenPanel:showIOSFullscreenPanel)();break;case 808:(414===window.innerHeight?hideIOSFullscreenPanel:showIOSFullscreenPanel)();break;default:hideIOSFullscreenPanel()}break;default:hideIOSFullscreenPanel()}}function iosResize(){__iosResize(),setTimeout(function(){__iosResize()},500)}function iosInIframe(){try{return window.self!==window.top}catch(e){return!0}}function isIOSLessThen13(){var e=(t=platform.os).family.toLowerCase(),t=parseFloat(t.version);return"ios"===e&&t<13}!function(){var s="undefined"!=typeof window&&void 0!==window.document?window.document:{},e="undefined"!=typeof module&&module.exports,o=function(){for(var e,t=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],i=0,n=t.length,o={};i<n;i++)if((e=t[i])&&e[1]in s){for(i=0;i<e.length;i++)o[t[0][i]]=e[i];return o}return!1}(),i={change:o.fullscreenchange,error:o.fullscreenerror},t={request:function(n){return new Promise(function(e,t){var i=function(){this.off("change",i),e()}.bind(this);this.on("change",i),n=n||s.documentElement,Promise.resolve(n[o.requestFullscreen]()).catch(t)}.bind(this))},exit:function(){return new Promise(function(e,t){var i;this.isFullscreen?(i=function(){this.off("change",i),e()}.bind(this),this.on("change",i),Promise.resolve(s[o.exitFullscreen]()).catch(t)):e()}.bind(this))},toggle:function(e){return this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,t){e=i[e];e&&s.addEventListener(e,t,!1)},off:function(e,t){e=i[e];e&&s.removeEventListener(e,t,!1)},raw:o};o?(Object.defineProperties(t,{isFullscreen:{get:function(){return!!s[o.fullscreenElement]}},element:{enumerable:!0,get:function(){return s[o.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!s[o.fullscreenEnabled]}}}),e?module.exports=t:window.screenfull=t):e?module.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}(),function(){function t(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function v(e){return e=String(e).replace(/^ +| +$/g,""),/^(?:webOS|i(?:OS|P))/.test(e)?e:t(e)}function C(e,t){for(var i in e)o.call(e,i)&&t(e[i],i,e)}function B(e){return null==e?t(e):F.call(e).slice(8,-1)}function I(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function x(i,n){var o=null,e=i,t=function(e,t){o=n(o,e,t,i)},s=-1,a=e?e.length:0;if("number"==typeof a&&-1<a&&a<=r)for(;++s<a;)t(e[s],s,e);else C(e,t);return o}function P(s){function e(e){return x(e,function(e,t){var i=t.pattern||I(t);return!e&&(e=RegExp("\\b"+i+" *\\d+[.\\w_]*","i").exec(s)||RegExp("\\b"+i+" *\\w+-[\\w]*","i").exec(s)||RegExp("\\b"+i+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(s))&&((e=String(t.label&&!RegExp(i,"i").test(t.label)?t.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),t=t.label||t,e=v(e[0].replace(RegExp(i,"i"),t).replace(RegExp("; *(?:"+t+"[_-])?","i")," ").replace(RegExp("("+t+")[-_.]?(\\w)","i"),"$1 $2"))),e})}var t,i,n,o,a,r=U,l=((T=s&&"object"==typeof s&&"String"!=B(s))&&(r=s,s=null),r.navigator||{}),_=l.userAgent||"",c=(s=s||_,T?!!l.likeChrome:/\bChrome\b/.test(s)&&!/internal|\n/i.test(F.toString())),u=T?"Object":"ScriptBridgingProxyObject",h=T?"Object":"Environment",S=T&&r.java?"JavaPackage":B(r.java),d=T?"Object":"RuntimeObject",h=(S=/\bJava/.test(S)&&r.java)&&B(r.environment)==h,p=S?"a":"α",f=S?"b":"β",b=r.document||{},E=r.operamini||r.opera,m=R.test(m=T&&E?E["[[Class]]"]:B(E))?m:E=null,g=s,T=[],w=null,O=s==_,_=O&&E&&"function"==typeof E.version&&E.version(),A=x([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(e,t){return e||RegExp("\\b"+(t.pattern||I(t))+"\\b","i").exec(s)&&(t.label||t)}),N=x(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],function(e,t){return e||RegExp("\\b"+(t.pattern||I(t))+"\\b","i").exec(s)&&(t.label||t)}),y=e([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),M=x({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}},function(e,t,i){return e||(t[y]||t[/^[a-z]+(?: +[a-z]+\b)*/i.exec(y)]||RegExp("\\b"+I(i)+"(?:\\b|\\w*\\d)","i").exec(s))&&i}),L=x(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],function(e,t){var i,n,o=t.pattern||I(t);return!e&&(e=RegExp("\\b"+o+"(?:/[\\d.]+|[ \\w.]*)","i").exec(s))&&(i=e,t=t.label||t,n={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"},o&&t&&/^Win/i.test(i)&&!/^Windows Phone /i.test(i)&&(n=n[/[\d.]+$/.exec(i)])&&(i="Windows "+n),i=String(i),e=i=v((i=o&&t?i.replace(RegExp(o,"i"),t):i).replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])),e}),A=A&&[A];if(M&&!y&&(y=e([M])),(t=/\bGoogle TV\b/.exec(y))&&(y=t[0]),/\bSimulator\b/i.test(s)&&(y=(y?y+" ":"")+"Simulator"),"Opera Mini"==N&&/\bOPiOS\b/.test(s)&&T.push("running in Turbo/Uncompressed mode"),"IE"==N&&/\blike iPhone OS\b/.test(s)?(M=(t=P(s.replace(/like iPhone OS/,""))).manufacturer,y=t.product):/^iP/.test(y)?(N=N||"Safari",L="iOS"+((t=/ OS ([\d_]+)/i.exec(s))?" "+t[1].replace(/_/g,"."):"")):"Konqueror"!=N||/buntu/i.test(L)?M&&"Google"!=M&&(/Chrome/.test(N)&&!/\bMobile Safari\b/i.test(s)||/\bVita\b/.test(y))||/\bAndroid\b/.test(L)&&/^Chrome/.test(N)&&/\bVersion\//i.test(s)?(N="Android Browser",L=/\bAndroid\b/.test(L)?L:"Android"):"Silk"==N?(/\bMobi/i.test(s)||(L="Android",T.unshift("desktop mode")),/Accelerated *= *true/i.test(s)&&T.unshift("accelerated")):"PaleMoon"==N&&(t=/\bFirefox\/([\d.]+)\b/.exec(s))?T.push("identifying as Firefox "+t[1]):"Firefox"==N&&(t=/\b(Mobile|Tablet|TV)\b/i.exec(s))?(L=L||"Firefox OS",y=y||t[1]):!N||(t=!/\bMinefield\b/i.test(s)&&/\b(?:Firefox|Safari)\b/.exec(N))?(N&&!y&&/[\/,]|^[^(]+?\)/.test(s.slice(s.indexOf(t+"/")+8))&&(N=null),(t=y||M||L)&&(y||M||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(L))&&(N=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(L)?L:t)+" Browser")):"Electron"==N&&(t=(/\bChrome\/([\d.]+)\b/.exec(s)||0)[1])&&T.push("Chromium "+t):L="Kubuntu",_||(_=x(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",I(N),"(?:Firefox|Minefield|NetFront)"],function(e,t){return e||(RegExp(t+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(s)||0)[1]||null})),(t=("iCab"==A&&3<parseFloat(_)?"WebKit":/\bOpera\b/.test(N)&&(/\bOPR\b/.test(s)?"Blink":"Presto"))||(/\b(?:Midori|Nook|Safari)\b/i.test(s)&&!/^(?:Trident|EdgeHTML)$/.test(A)?"WebKit":!A&&/\bMSIE\b/i.test(s)&&("Mac OS"==L?"Tasman":"Trident"))||"WebKit"==A&&/\bPlayStation\b(?! Vita\b)/i.test(N)&&"NetFront")&&(A=[t]),"IE"==N&&(t=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(s)||0)[1])?(N+=" Mobile",L="Windows Phone "+(/\+$/.test(t)?t:t+".x"),T.unshift("desktop mode")):/\bWPDesktop\b/i.test(s)?(N="IE Mobile",L="Windows Phone 8.x",T.unshift("desktop mode"),_=_||(/\brv:([\d.]+)/.exec(s)||0)[1]):"IE"!=N&&"Trident"==A&&(t=/\brv:([\d.]+)/.exec(s))&&(N&&T.push("identifying as "+N+(_?" "+_:"")),N="IE",_=t[1]),O){if(n="global",o=null!=(i=r)?typeof i[n]:"number",/^(?:boolean|number|string|undefined)$/.test(o)||"object"==o&&!i[n])B(t=r.runtime)==u?(N="Adobe AIR",L=t.flash.system.Capabilities.os):B(t=r.phantom)==d?(N="PhantomJS",_=(t=t.version||null)&&t.major+"."+t.minor+"."+t.patch):"number"==typeof b.documentMode&&(t=/\bTrident\/(\d+)/i.exec(s))?(_=[_,b.documentMode],(t=+t[1]+4)!=_[1]&&(T.push("IE "+_[1]+" mode"),A&&(A[1]=""),_[1]=t),_="IE"==N?String(_[1].toFixed(1)):_[0]):"number"==typeof b.documentMode&&/^(?:Chrome|Firefox)\b/.test(N)&&(T.push("masking as "+N+" "+_),N="IE",_="11.0",A=["Trident"],L="Windows");else if(S&&(g=(t=S.lang.System).getProperty("os.arch"),L=L||t.getProperty("os.name")+" "+t.getProperty("os.version")),h){try{_=r.require("ringo/engine").version.join("."),N="RingoJS"}catch(e){(t=r.system)&&t.global.system==r.system&&(N="Narwhal",L=L||t[0].os||null)}N=N||"Rhino"}else"object"==typeof r.process&&!r.process.browser&&(t=r.process)&&("object"==typeof t.versions&&("string"==typeof t.versions.electron?(T.push("Node "+t.versions.node),N="Electron",_=t.versions.electron):"string"==typeof t.versions.nw&&(T.push("Chromium "+_,"Node "+t.versions.node),N="NW.js",_=t.versions.nw)),N||(N="Node.js",g=t.arch,L=t.platform,_=(_=/[\d.]+/.exec(t.version))?_[0]:null));L=L&&v(L)}if(_&&(t=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(_)||/(?:alpha|beta)(?: ?\d)?/i.exec(s+";"+(O&&l.appMinorVersion))||/\bMinefield\b/i.test(s)&&"a")&&(w=/b/i.test(t)?"beta":"alpha",_=_.replace(RegExp(t+"\\+?$"),"")+("beta"==w?f:p)+(/\d+\+?/.exec(t)||"")),"Fennec"==N||"Firefox"==N&&/\b(?:Android|Firefox OS)\b/.test(L))N="Firefox Mobile";else if("Maxthon"==N&&_)_=_.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(y))"Xbox 360"==y&&(L=null),"Xbox 360"==y&&/\bIEMobile\b/.test(s)&&T.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(N)&&(!N||y||/Browser|Mobi/.test(N))||"Windows CE"!=L&&!/Mobi/i.test(s))if("IE"==N&&O)try{null===r.external&&T.unshift("platform preview")}catch(e){T.unshift("embedded")}else(/\bBlackBerry\b/.test(y)||/\bBB10\b/.test(s))&&(t=(RegExp(y.replace(/ +/g," *")+"/([.\\d]+)","i").exec(s)||0)[1]||_)?(L=((t=[t,/BB10/.test(s)])[1]?(y=null,M="BlackBerry"):"Device Software")+" "+t[0],_=null):this!=C&&"Wii"!=y&&(O&&E||/Opera/.test(N)&&/\b(?:MSIE|Firefox)\b/i.test(s)||"Firefox"==N&&/\bOS X (?:\d+\.){2,}/.test(L)||"IE"==N&&(L&&!/^Win/.test(L)&&5.5<_||/\bWindows XP\b/.test(L)&&8<_||8==_&&!/\bTrident\b/.test(s)))&&!R.test(t=P.call(C,s.replace(R,"")+";"))&&t.name&&(t="ing as "+t.name+((t=t.version)?" "+t:""),R.test(N)?(/\bIE\b/.test(t)&&"Mac OS"==L&&(L=null),t="identify"+t):(t="mask"+t,N=m?v(m.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(t)&&(L=null),O||(_=null)),A=["Presto"],T.push(t));else N+=" Mobile";return(t=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(s)||0)[1])&&(t=[parseFloat(t.replace(/\.(\d)$/,".0$1")),t],"Safari"==N&&"+"==t[1].slice(-1)?(N="WebKit Nightly",w="alpha",_=t[1].slice(0,-1)):_!=t[1]&&_!=(t[2]=(/\bSafari\/([\d.]+\+?)/i.exec(s)||0)[1])||(_=null),t[1]=(/\bChrome\/([\d.]+)/i.exec(s)||0)[1],537.36==t[0]&&537.36==t[2]&&28<=parseFloat(t[1])&&"WebKit"==A&&(A=["Blink"]),t=O&&(c||t[1])?(A&&(A[1]="like Chrome"),t[1]||((t=t[0])<530?1:t<532?2:t<532.05?3:t<533?4:t<534.03?5:t<534.07?6:t<534.1?7:t<534.13?8:t<534.16?9:t<534.24?10:t<534.3?11:t<535.01?12:t<535.02?"13+":t<535.07?15:t<535.11?16:t<535.19?17:t<536.05?18:t<536.1?19:t<537.01?20:t<537.11?"21+":t<537.13?23:t<537.18?24:t<537.24?25:t<537.36?26:"Blink"!=A?"27":"28")):(A&&(A[1]="like Safari"),(t=t[0])<400?1:t<500?2:t<526?3:t<533?4:t<534?"4+":t<535?5:t<537?6:t<538?7:t<601?8:"8"),A&&(A[1]+=" "+(t+="number"==typeof t?".x":/[.+]/.test(t)?"":"+")),"Safari"==N)&&(!_||45<parseInt(_))&&(_=t),"Opera"==N&&(t=/\bzbov|zvav$/.exec(L))?(N+=" ",T.unshift("desktop mode"),"zvav"==t?(N+="Mini",_=null):N+="Mobile",L=L.replace(RegExp(" *"+t+"$"),"")):"Safari"==N&&/\bChrome\b/.exec(A&&A[1])&&(T.unshift("desktop mode"),N="Chrome Mobile",_=null,L=/\bOS X\b/.test(L)?(M="Apple","iOS 4.3+"):null),_&&0==_.indexOf(t=/[\d.]+$/.exec(L))&&-1<s.indexOf("/"+t+"-")&&(L=String(L.replace(t,"")).replace(/^ +| +$/g,"")),A&&!/\b(?:Avant|Nook)\b/.test(N)&&(/Browser|Lunascape|Maxthon/.test(N)||"Safari"!=N&&/^iOS/.test(L)&&/\bSafari\b/.test(A[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(N)&&A[1])&&(t=A[A.length-1])&&T.push(t),T.length&&(T=["("+T.join("; ")+")"]),M&&y&&y.indexOf(M)<0&&T.push("on "+M),y&&T.push((/^on /.test(T[T.length-1])?"":"on ")+y),L&&(a=(t=/ ([\d.+]+)$/.exec(L))&&"/"==L.charAt(L.length-t[0].length-1),L={architecture:32,family:t&&!a?L.replace(t[0],""):L,version:t?t[1]:null,toString:function(){var e=this.version;return this.family+(e&&!a?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(t=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(g))&&!/\bi686\b/i.test(g)?(L&&(L.architecture=64,L.family=L.family.replace(RegExp(" *"+t),"")),N&&(/\bWOW64\b/i.test(s)||O&&/\w(?:86|32)$/.test(l.cpuClass||l.platform)&&!/\bWin64; x64\b/i.test(s))&&T.unshift("32-bit")):L&&/^OS X/.test(L.family)&&"Chrome"==N&&39<=parseFloat(_)&&(L.architecture=64),s=s||null,(r={}).description=s,r.layout=A&&A[0],r.manufacturer=M,r.name=N,r.prerelease=w,r.product=y,r.ua=s,r.version=N&&_,r.os=L||{architecture:null,family:null,version:null,toString:function(){return"null"}},r.parse=P,r.toString=function(){return this.description||""},r.version&&T.unshift(_),r.name&&T.unshift(N),L&&N&&(L!=String(L).split(" ")[0]||L!=N.split(" ")[0]&&!y)&&T.push(y?"("+L+")":"on "+L),T.length&&(r.description=T.join(" ")),r}var U=(e={function:!0,object:!0})[typeof window]&&window||this,i=e[typeof exports]&&exports,e=e[typeof module]&&module&&!module.nodeType&&module,n=i&&e&&"object"==typeof global&&global,r=(!n||n.global!==n&&n.window!==n&&n.self!==n||(U=n),Math.pow(2,53)-1),R=/\bOpera/,o=(n=Object.prototype).hasOwnProperty,F=n.toString,s=P();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(U.platform=s,define(function(){return s})):i&&e?C(s,function(e,t){i[t]=e}):U.platform=s}.call(this),$(document).ready(function(){platform&&"iPhone"===platform.product&&"safari"===platform.name.toLowerCase()&&isIOSLessThen13()&&!iosInIframe()&&(buildIOSFullscreenPanel(),buildIOSMeta())}),jQuery(window).resize(function(){platform&&"iPhone"===platform.product&&"safari"===platform.name.toLowerCase()&&isIOSLessThen13()&&!iosInIframe()&&iosResize()});var s_iOffsetX,s_iOffsetY,s_iScaleFactor=1,s_bIsIphone=!1,s_bFocus=!0;function trace(e){console.log(e)}function isChrome(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}function isIpad(){var e=-1!==navigator.userAgent.toLowerCase().indexOf("ipad");return!!(!e&&navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints)||e}function isMobile(){return!!isIpad()||jQuery.browser.mobile}function isIOS(){var e="iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";");if(-1!==navigator.userAgent.toLowerCase().indexOf("iphone"))return s_bIsIphone=!0;for(;e.length;)if(navigator.platform===e.pop())return!0;return s_bIsIphone=!1}function getSize(e){var t,i,n=e.toLowerCase(),o=window.document,s=o.documentElement;return void 0===window["inner"+e]?e=s["client"+e]:window["inner"+e]!=s["client"+e]?((t=o.createElement("body")).id="vpw-test-b",t.style.cssText="overflow:scroll",(i=o.createElement("div")).id="vpw-test-d",i.style.cssText="position:absolute;top:-1000px",i.innerHTML="<style>@media("+n+":"+s["client"+e]+"px){body#vpw-test-b div#vpw-test-d{"+n+":7px!important}}</style>",t.appendChild(i),s.insertBefore(t,o.head),e=7==i["offset"+e]?s["client"+e]:window["inner"+e],s.removeChild(t)):e=window["inner"+e],e}function onOrientationChange(){sizeHandler()}function getIOSWindowHeight(){return document.documentElement.clientWidth/window.innerWidth*window.innerHeight}function getHeightOfIOSToolbars(){var e=(0===window.orientation?screen.height:screen.width)-getIOSWindowHeight();return 1<e?e:0}function sizeHandler(){var e,t,i,n,o,s,a;window.scrollTo(0,1),$("#canvas")&&(e=null!==platform.name&&"safari"===platform.name.toLowerCase()?getIOSWindowHeight():getSize("Height"),t=getSize("Width"),s_bFocus&&_checkOrientation(t,e),n=Math.min(e/CANVAS_HEIGHT,t/CANVAS_WIDTH),i=Math.round(CANVAS_WIDTH*n),(n=Math.round(CANVAS_HEIGHT*n))<e?(n+=o=e-n,i+=CANVAS_WIDTH/CANVAS_HEIGHT*o):i<t&&(i+=o=t-i,n+=CANVAS_HEIGHT/CANVAS_WIDTH*o),o=e/2-n/2,((s=t/2-i/2)*(a=CANVAS_WIDTH/i)<-EDGEBOARD_X||o*a<-EDGEBOARD_Y)&&(n=Math.min(e/(CANVAS_HEIGHT-2*EDGEBOARD_Y),t/(CANVAS_WIDTH-2*EDGEBOARD_X)),i=Math.round(CANVAS_WIDTH*n),o=(e-(n=Math.round(CANVAS_HEIGHT*n)))/2,s=(t-i)/2,a=CANVAS_WIDTH/i),s_iOffsetX=-1*s*a,s_iOffsetY=0<=o?0:-1*o*a,0<=s&&(s_iOffsetX=0),null!==s_oGame&&s_oGame.refreshButtonPos(s_iOffsetX,s_iOffsetY),null!==s_oMenu&&s_oMenu.refreshButtonPos(s_iOffsetX,s_iOffsetY),s_bIsIphone&&s_oStage?(canvas=document.getElementById("canvas"),s_oStage.canvas.width=2*i,s_oStage.canvas.height=2*n,canvas.style.width=i+"px",canvas.style.height=n+"px",s_iScaleFactor=2*Math.min(i/CANVAS_WIDTH,n/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor):s_bMobile||isChrome()?($("#canvas").css("width",i+"px"),$("#canvas").css("height",n+"px")):s_oStage&&(s_oStage.canvas.width=i,s_oStage.canvas.height=n,s_iScaleFactor=Math.min(i/CANVAS_WIDTH,n/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor),o<0||(o=(e-n)/2),$("#canvas").css("top",o+"px"),$("#canvas").css("left",s+"px"),fullscreenHandler())}function _checkOrientation(e,t){s_bMobile&&ENABLE_CHECK_ORIENTATION&&(t<e?"landscape"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),s_oMain.stopUpdate()):"portrait"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),s_oMain.stopUpdate()))}function createBitmap(e,t,i){var n=new createjs.Bitmap(e),o=new createjs.Shape;return t&&i?o.graphics.beginFill("#fff").drawRect(0,0,t,i):o.graphics.beginFill("#ff0").drawRect(0,0,e.width,e.height),n.hitArea=o,n}function createSprite(e,t,i,n,o,s){return e=null!==t?new createjs.Sprite(e,t):new createjs.Sprite(e),(t=new createjs.Shape).graphics.beginFill("#000000").drawRect(-i,-n,o,s),e.hitArea=t,e}function randomFloatBetween(e,t,i){return void 0===i&&(i=2),parseFloat(Math.min(e+Math.random()*(t-e),t).toFixed(i))}function shuffle(e){for(var t,i,n=e.length;0!==n;)i=Math.floor(Math.random()*n),t=e[--n],e[n]=e[i],e[i]=t;return e}function formatTime(e){e/=1e3;var t=Math.floor(e/60),i=t<10?"0"+t+":":t+":";return(e=parseFloat(e-60*t).toFixed(1))<10?i+"0"+e:i+e}function rotateVector2D(e,t){var i=t.getX()*Math.cos(e)+t.getY()*Math.sin(e),e=t.getX()*-Math.sin(e)+t.getY()*Math.cos(e);t.set(i,e)}function NoClickDelay(e){this.element=e,window.Touch&&this.element.addEventListener("touchstart",this,!1)}function getUrlVars(e){var t=[];e=(e=e.trim()).split("&");for(var i=0;i<e.length;i++){var n=e[i].split("=");t[n[0]]=n[1]}return t}function tryCheckLogin(){var e=checkLogin();"true"===(e=getUrlVars(e)).res?(s_bLogged=!0,WHEEL_SETTINGS=e.bonus_prize.split("#"),s_oGameSettings.initSymbolWin(e.paytable),COIN_BET=e.coin_bet.split("#"),MAX_BET=parseFloat(COIN_BET[COIN_BET.length-1]),MIN_BET=parseFloat(COIN_BET[0]),$(s_oMain).trigger("start_session"),s_oMenu.exitFromMenu()):s_oMsgBox.show("can't login #"+e.desc)}function tryCallSpin(e,t,i){"true"===(e=getUrlVars(e=callSpin(i,e,t))).res?s_oGame.onSpinReceived(e):s_oMsgBox.show(e.desc)}function ctlArcadeResume(){null!==s_oMain&&s_oMain.startUpdate()}function ctlArcadePause(){null!==s_oMain&&s_oMain.stopUpdate()}function getParamValue(e){for(var t=window.location.search.substring(1).split("&"),i=0;i<t.length;i++){var n=t[i].split("=");if(n[0]==e)return n[1]}}function playSound(e,t,i){return!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(s_aSounds[e].play(),s_aSounds[e].volume(t),s_aSounds[e].loop(i),s_aSounds[e]):null}function stopSound(e){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[e].stop()}function setVolume(e,t){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[e].volume(t)}function setMute(e,t){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[e].mute(t)}function fullscreenHandler(){ENABLE_FULLSCREEN&&screenfull.isEnabled&&(s_bFullscreen=screenfull.isFullscreen,null!==s_oInterface&&s_oInterface.resetFullscreenBut(),null!==s_oMenu)&&s_oMenu.resetFullscreenBut()}function CSpriteLibrary(){var n,o,s,a,r,l,_={};this.init=function(e,t,i){n={},s=o=0,a=e,r=t,l=i},this.addSprite=function(e,t){var i;return!_.hasOwnProperty(e)&&(i=new Image,_[e]=n[e]={szPath:t,oSprite:i,bLoaded:!1},o++,!0)},this.getSprite=function(e){return _.hasOwnProperty(e)?_[e].oSprite:null},this._onSpritesLoaded=function(){o=0,r.call(l)},this._onSpriteLoaded=function(){a.call(l),++s===o&&this._onSpritesLoaded()},this.loadSprites=function(){for(var e in n)n[e].oSprite.oSpriteLibrary=this,n[e].oSprite.szKey=e,n[e].oSprite.onload=function(){this.oSpriteLibrary.setLoaded(this.szKey),this.oSpriteLibrary._onSpriteLoaded(this.szKey)},n[e].oSprite.onerror=function(e){var t=e.currentTarget;setTimeout(function(){n[t.szKey].oSprite.src=n[t.szKey].szPath},500)},n[e].oSprite.src=n[e].szPath},this.setLoaded=function(e){_[e].bLoaded=!0},this.isLoaded=function(e){return _[e].bLoaded},this.getNumSprites=function(){return o}}!function(e){(jQuery.browser=jQuery.browser||{}).mobile=/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera),$(window).resize(function(){sizeHandler()}),window.addEventListener("orientationchange",onOrientationChange),NoClickDelay.prototype={handleEvent:function(e){switch(e.type){case"touchstart":this.onTouchStart(e);break;case"touchmove":this.onTouchMove(e);break;case"touchend":this.onTouchEnd(e)}},onTouchStart:function(e){e.preventDefault(),this.moved=!1,this.element.addEventListener("touchmove",this,!1),this.element.addEventListener("touchend",this,!1)},onTouchMove:function(e){this.moved=!0},onTouchEnd:function(e){var t;this.element.removeEventListener("touchmove",this,!1),this.element.removeEventListener("touchend",this,!1),this.moved||(3===(e=document.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY)).nodeType&&(e=e.parentNode),(t=document.createEvent("MouseEvents")).initEvent("click",!0,!0),e.dispatchEvent(t))}},function(){function e(e){var t={focus:"visible",focusin:"visible",pageshow:"visible",blur:"hidden",focusout:"hidden",pagehide:"hidden"};(e=e||window.event).type in t?document.body.className=t[e.type]:(document.body.className=this[i]?"hidden":"visible",s_bFocus="hidden"===document.body.className?(s_oMain.stopUpdate(),!1):(s_oMain.startUpdate(),!0))}var i="hidden";i in document?document.addEventListener("visibilitychange",e):(i="mozHidden")in document?document.addEventListener("mozvisibilitychange",e):(i="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",e):(i="msHidden")in document?document.addEventListener("msvisibilitychange",e):"onfocusin"in document?document.onfocusin=document.onfocusout=e:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=e}(),screenfull.isEnabled&&screenfull.on("change",function(){s_bFullscreen=screenfull.isFullscreen,null!==s_oInterface&&s_oInterface.resetFullscreenBut(),null!==s_oMenu&&s_oMenu.resetFullscreenBut()});var MIN_REEL_LOOPS,REEL_DELAY,TIME_SHOW_WIN,TIME_SHOW_ALL_WINS,COIN_BET,MIN_BET,MAX_BET,TOTAL_MONEY,WIN_OCCURRENCE,SLOT_CASH,MIN_WIN,FREESPIN_OCCURRENCE,BONUS_OCCURRENCE,FREESPIN_SYMBOL_NUM_OCCURR,NUM_FREESPIN,BONUS_PRIZE,BONUS_PRIZE_OCCURR,PAYTABLE_VALUES,WHEEL_SETTINGS,NUM_SPIN_FOR_ADS,ENABLE_FULLSCREEN,ENABLE_CHECK_ORIENTATION,SHOW_CREDITS,CANVAS_WIDTH=1500,CANVAS_HEIGHT=768,EDGEBOARD_X=200,EDGEBOARD_Y=70,FPS=30,FPS_TIME=1e3/FPS,DISABLE_SOUND_MOBILE=!1,FONT_GAME_1="odin_roundedbold",FONT_GAME_2="Digital-7",STATE_LOADING=0,STATE_MENU=1,STATE_HELP=1,STATE_GAME=3,GAME_STATE_IDLE=0,GAME_STATE_SPINNING=1,GAME_STATE_SHOW_ALL_WIN=2,GAME_STATE_SHOW_WIN=3,GAME_STATE_BONUS=4,REEL_STATE_START=0,REEL_STATE_MOVING=1,REEL_STATE_STOP=2,SPIN_BUT_STATE_SPIN="spin",SPIN_BUT_STATE_STOP="stop",SPIN_BUT_STATE_AUTOSPIN="autospin",SPIN_BUT_STATE_DISABLE="disable",SPIN_BUT_STATE_FREESPIN="freespin",SPIN_BUT_STATE_SKIP="skip",ON_MOUSE_DOWN=0,ON_MOUSE_UP=1,ON_MOUSE_OVER=2,ON_MOUSE_OUT=3,ON_DRAG_START=4,ON_DRAG_END=5,BONUS_BUTTON_1="up_left",BONUS_BUTTON_2="center_left",BONUS_BUTTON_3="down_left",BONUS_BUTTON_4="up_right",BONUS_BUTTON_5="center_right",BONUS_BUTTON_6="down_right",REEL_OFFSET_X=290,REEL_OFFSET_Y=97,NUM_REELS=5,NUM_ROWS=3,NUM_SYMBOLS=13,WILD_SYMBOL=12,BONUS_SYMBOL=13,FREESPIN_SYMBOL=1,NUM_PAYLINES=20,SYMBOL_WIDTH=171,SYMBOL_HEIGHT=164,SYMBOL_ANIM_WIDTH=340,SYMBOL_ANIM_HEIGHT=326,SPACE_BETWEEN_SYMBOLS=17,SPACE_HEIGHT_BETWEEN_SYMBOLS=4,MAX_FRAMES_REEL_EASE=16,REEL_START_Y=REEL_OFFSET_Y-3*(SYMBOL_HEIGHT+SPACE_HEIGHT_BETWEEN_SYMBOLS),REEL_ARRIVAL_Y=REEL_OFFSET_Y+3*(SYMBOL_HEIGHT+SPACE_HEIGHT_BETWEEN_SYMBOLS),TIME_SPIN_BUT_CHANGE=1e3,TIME_HOLD_AUTOSPIN=1e3,BONUS_FREESPIN=1,BONUS_GOALKEEPER=2,SEGMENT_ROT=18,TIME_ANIM_IDLE=1e4,MIN_FAKE_SPIN=3,WHEEL_SPIN_TIMESPEED=2600,ANIM_SPIN_TIMESPEED=50,TIME_ANIM_WIN=5e3,ANIM_WIN1_TIMESPEED=300,ANIM_WIN2_TIMESPEED=50,LED_SPIN=3,ANIM_IDLE1_TIMESPEED=2e3,ANIM_IDLE2_TIMESPEED=100,ANIM_IDLE3_TIMESPEED=150,STATE_BONUS_IDLE=0,STATE_BONUS_KICK=1,STATE_BONUS_WIN=2,STATE_BONUS_LOSE=3,SOUNDTRACK_VOLUME_IN_GAME=1;function CSlotSettings(){this._init=function(){this._initSymbolSpriteSheets(),this._initSymbolAnims(),this._initSymbolsOccurence()},this._initSymbolSpriteSheets=function(){s_aSymbolData=[];for(var e=1;e<NUM_SYMBOLS+1;e++){var t={images:[s_oSpriteLibrary.getSprite("symbol_"+e)],frames:{width:SYMBOL_WIDTH,height:SYMBOL_HEIGHT,regX:0,regY:0},animations:{static:[0,1],moving:[1,2]}};s_aSymbolData[e]=new createjs.SpriteSheet(t)}},this.initSymbolWin=function(e){e=e.split("#"),s_aSymbolWin=[];for(var t=0;t<e.length;t++){var i=e[t].split(",");s_aSymbolWin[t]=[];for(var n=0;n<i.length;n++)s_aSymbolWin[t][n]=parseFloat(i[n])}},this._initSymbolsOccurence=function(){var e;for(s_aRandSymbols=[],e=0;e<1;e++)s_aRandSymbols.push(1);for(e=0;e<2;e++)s_aRandSymbols.push(2);for(e=0;e<3;e++)s_aRandSymbols.push(3);for(e=0;e<4;e++)s_aRandSymbols.push(4);for(e=0;e<4;e++)s_aRandSymbols.push(5);for(e=0;e<6;e++)s_aRandSymbols.push(6);for(e=0;e<6;e++)s_aRandSymbols.push(7);for(e=0;e<6;e++)s_aRandSymbols.push(8);for(e=0;e<6;e++)s_aRandSymbols.push(9);for(e=0;e<6;e++)s_aRandSymbols.push(10);for(e=0;e<6;e++)s_aRandSymbols.push(11);for(e=0;e<1;e++)s_aRandSymbols.push(12);for(e=0;e<1;e++)s_aRandSymbols.push(13)},this._initSymbolAnims=function(){s_aSymbolAnims=[];for(var e=Math.floor(FPS/2),t=0;t<NUM_SYMBOLS;t++){var i={framerate:e,images:[s_oSpriteLibrary.getSprite("symbol_"+(t+1)+"_anim")],frames:{width:SYMBOL_ANIM_WIDTH,height:SYMBOL_ANIM_HEIGHT},animations:{static:[0],anim:[0,23]}};s_aSymbolAnims[t]=new createjs.SpriteSheet(i)}s_oAnimRegPoint=[{x:85,y:82},{x:85,y:82},{x:85,y:82},{x:85,y:82},{x:85,y:82},{x:85,y:82},{x:85,y:82},{x:85,y:82},{x:85,y:82},{x:85,y:82},{x:85,y:82},{x:85,y:82},,{x:85,y:82}]},this._init()}var s_aSymbolData,s_aPaylineCombo,s_aSymbolWin,s_aSymbolAnims,s_aRandSymbols,s_oAnimRegPoint=[];function CPreloader(){var t,i,n,o,s,a,r,l,_;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this),s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png"),s_oSpriteLibrary.addSprite("200x200","./sprites/200x200.jpg"),s_oSpriteLibrary.loadSprites(),_=new createjs.Container,s_oStage.addChild(_)},this.unload=function(){_.removeAllChildren()},this._onImagesLoaded=function(){},this._onAllImagesLoaded=function(){this.attachSprites(),s_oMain.preloaderReady()},this.attachSprites=function(){var e=new createjs.Shape;e.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT),_.addChild(e),e=s_oSpriteLibrary.getSprite("200x200"),(r=createBitmap(e)).regX=.5*e.width,r.regY=.5*e.height,r.x=CANVAS_WIDTH/2,r.y=CANVAS_HEIGHT/2-180,_.addChild(r),(l=new createjs.Shape).graphics.beginFill("rgba(0,0,0,0.01)").drawRoundRect(r.x-100,r.y-100,200,200,10),_.addChild(l),r.mask=l,e=s_oSpriteLibrary.getSprite("progress_bar"),(o=createBitmap(e)).x=CANVAS_WIDTH/2-e.width/2,o.y=CANVAS_HEIGHT/2+50,_.addChild(o),t=e.width,i=e.height,(s=new createjs.Shape).graphics.beginFill("rgba(0,0,0,0.01)").drawRect(o.x,o.y,1,i),_.addChild(s),o.mask=s,(n=new createjs.Text("","30px "+FONT_GAME_1,"#fff")).x=CANVAS_WIDTH/2,n.y=CANVAS_HEIGHT/2+100,n.textBaseline="alphabetic",n.textAlign="center",_.addChild(n),(a=new createjs.Shape).graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT),_.addChild(a),createjs.Tween.get(a).to({alpha:0},500).call(function(){createjs.Tween.removeTweens(a),_.removeChild(a)})},this.refreshLoader=function(e){n.text=e+"%",100===e&&(s_oMain._onRemovePreloader(),n.visible=!1,o.visible=!1),s.graphics.clear(),e=Math.floor(e*t/100),s.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(o.x,o.y,e,i)},this._init()}function CMain(t){var i,n,o,e=0,s=0,a=STATE_LOADING,r=(this.initContainer=function(){var e=document.getElementById("canvas");s_oStage=new createjs.Stage(e),s_oAttachSection=new createjs.Container,s_oStage.addChild(s_oAttachSection),createjs.Touch.enable(s_oStage,!0),!1===(s_bMobile=isMobile())&&s_oStage.enableMouseOver(20),s_iPrevTime=(new Date).getTime(),createjs.Ticker.setFPS(FPS),createjs.Ticker.addEventListener("tick",this._update),navigator.userAgent.match(/Windows Phone/i)&&(DISABLE_SOUND_MOBILE=!0),s_oSpriteLibrary=new CSpriteLibrary,n=new CPreloader},this.preloaderReady=function(){this._loadImages(),!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||this._initSounds(),i=!0},this.soundLoaded=function(){e++,n.refreshLoader(Math.floor(e/s*100))},this._initSounds=function(){Howler.mute(!s_bAudioActive),(s_aSoundsInfo=[]).push({path:"./sounds/",filename:"crowd",loop:!0,volume:1,ingamename:"crowd"}),s_aSoundsInfo.push({path:"./sounds/",filename:"press_but",loop:!1,volume:1,ingamename:"press_but"}),s_aSoundsInfo.push({path:"./sounds/",filename:"reel_stop",loop:!1,volume:1,ingamename:"reel_stop"}),s_aSoundsInfo.push({path:"./sounds/",filename:"reel_stop_bonus",loop:!1,volume:1,ingamename:"reel_stop_bonus"}),s_aSoundsInfo.push({path:"./sounds/",filename:"reel_stop_freespin",loop:!1,volume:1,ingamename:"reel_stop_freespin"}),s_aSoundsInfo.push({path:"./sounds/",filename:"start_reel",loop:!1,volume:1,ingamename:"start_reel"}),s_aSoundsInfo.push({path:"./sounds/",filename:"spin_but",loop:!1,volume:1,ingamename:"spin_but"}),s_aSoundsInfo.push({path:"./sounds/",filename:"kick",loop:!1,volume:1,ingamename:"kick"}),s_aSoundsInfo.push({path:"./sounds/",filename:"symbol1",loop:!1,volume:1,ingamename:"symbol1"}),s_aSoundsInfo.push({path:"./sounds/",filename:"symbol2",loop:!1,volume:1,ingamename:"symbol2"}),s_aSoundsInfo.push({path:"./sounds/",filename:"symbol3",loop:!1,volume:1,ingamename:"symbol3"}),s_aSoundsInfo.push({path:"./sounds/",filename:"symbol4",loop:!1,volume:1,ingamename:"symbol4"}),s_aSoundsInfo.push({path:"./sounds/",filename:"symbol5",loop:!1,volume:1,ingamename:"symbol5"}),s_aSoundsInfo.push({path:"./sounds/",filename:"symbol6",loop:!1,volume:1,ingamename:"symbol6"}),s_aSoundsInfo.push({path:"./sounds/",filename:"symbol7",loop:!1,volume:1,ingamename:"symbol7"}),s_aSoundsInfo.push({path:"./sounds/",filename:"symbol8",loop:!1,volume:1,ingamename:"symbol8"}),s_aSoundsInfo.push({path:"./sounds/",filename:"symbol9_10_11",loop:!1,volume:1,ingamename:"symbol9_10_11"}),s_aSoundsInfo.push({path:"./sounds/",filename:"symbol12",loop:!1,volume:1,ingamename:"symbol12"}),s_aSoundsInfo.push({path:"./sounds/",filename:"symbol13",loop:!1,volume:1,ingamename:"symbol13"}),s_aSoundsInfo.push({path:"./sounds/",filename:"bonus_win",loop:!1,volume:1,ingamename:"bonus_win"}),s_aSoundsInfo.push({path:"./sounds/",filename:"avatar_win",loop:!1,volume:1,ingamename:"avatar_win"}),s_aSoundsInfo.push({path:"./sounds/",filename:"soundtrack",loop:!0,volume:1,ingamename:"soundtrack"}),s+=s_aSoundsInfo.length,s_aSounds=[];for(var e=0;e<s_aSoundsInfo.length;e++)this.tryToLoadSound(s_aSoundsInfo[e],!1)},this.tryToLoadSound=function(e,t){setTimeout(function(){s_aSounds[e.ingamename]=new Howl({src:[e.path+e.filename+".mp3"],autoplay:!1,preload:!0,loop:e.loop,volume:e.volume,onload:s_oMain.soundLoaded,onloaderror:function(e,t){for(var i=0;i<s_aSoundsInfo.length;i++)if(e===s_aSounds[s_aSoundsInfo[i].ingamename]._sounds[0]._id){s_oMain.tryToLoadSound(s_aSoundsInfo[i],!0);break}},onplayerror:function(e){for(var t=0;t<s_aSoundsInfo.length;t++)if(e===s_aSounds[s_aSoundsInfo[t].ingamename]._sounds[0]._id){s_aSounds[s_aSoundsInfo[t].ingamename].once("unlock",function(){s_aSounds[s_aSoundsInfo[t].ingamename].play(),"soundtrack"===s_aSoundsInfo[t].ingamename&&null!==s_oGame&&setVolume("soundtrack",SOUNDTRACK_VOLUME_IN_GAME)});break}}})},t?200:0)},this._loadImages=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this),s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg"),s_oSpriteLibrary.addSprite("but_bg","./sprites/but_play_bg.png"),s_oSpriteLibrary.addSprite("but_exit","./sprites/but_exit.png"),s_oSpriteLibrary.addSprite("bg_game","./sprites/bg_game.jpg"),s_oSpriteLibrary.addSprite("paytable1","./sprites/paytable1.jpg"),s_oSpriteLibrary.addSprite("paytable2","./sprites/paytable2.jpg"),s_oSpriteLibrary.addSprite("paytable3","./sprites/paytable3.jpg"),s_oSpriteLibrary.addSprite("paytable4","./sprites/paytable4.jpg"),s_oSpriteLibrary.addSprite("mask_slot","./sprites/mask_slot.png"),s_oSpriteLibrary.addSprite("coin_but","./sprites/but_coin_bg.png"),s_oSpriteLibrary.addSprite("info_but","./sprites/but_info_bg.png"),s_oSpriteLibrary.addSprite("win_frame_anim","./sprites/win_frame_anim.png"),s_oSpriteLibrary.addSprite("but_lines_bg","./sprites/but_lines_bg.png"),s_oSpriteLibrary.addSprite("but_maxbet_bg","./sprites/but_maxbet_bg.png"),s_oSpriteLibrary.addSprite("audio_icon","./sprites/audio_icon.png"),s_oSpriteLibrary.addSprite("msg_box","./sprites/msg_box.png"),s_oSpriteLibrary.addSprite("but_arrow_next","./sprites/but_arrow_next.png"),s_oSpriteLibrary.addSprite("but_arrow_prev","./sprites/but_arrow_prev.png"),s_oSpriteLibrary.addSprite("logo","./sprites/logo.png"),s_oSpriteLibrary.addSprite("but_spin","./sprites/but_spin.png"),s_oSpriteLibrary.addSprite("bg_loading_bonus","./sprites/bg_loading_bonus.jpg"),s_oSpriteLibrary.addSprite("bg_loading","./sprites/bg_loading.jpg"),s_oSpriteLibrary.addSprite("but_fullscreen","./sprites/but_fullscreen.png"),s_oSpriteLibrary.addSprite("but_credits","./sprites/but_credits.png"),s_oSpriteLibrary.addSprite("ctl_logo","./sprites/ctl_logo.png"),s_oSpriteLibrary.addSprite("but_exit_info","./sprites/but_exit_info.png"),s_oSpriteLibrary.addSprite("amount_win_bg","./sprites/amount_win_bg.png");for(var e=1;e<NUM_SYMBOLS+1;e++)s_oSpriteLibrary.addSprite("symbol_"+e,"./sprites/symbol_"+e+".png"),s_oSpriteLibrary.addSprite("symbol_"+e+"_anim","./sprites/symbol_"+e+"_anim.jpg");for(e=1;e<NUM_PAYLINES+1;e++)s_oSpriteLibrary.addSprite("payline_"+e,"./sprites/paylines/payline_"+e+".png"),s_oSpriteLibrary.addSprite("bet_but"+e,"./sprites/paylines/bet_but"+e+".png");for(e=0;e<30;e++)s_oSpriteLibrary.addSprite("avatar_idle_"+e,"./sprites/avatar/avatar_idle/avatar_idle_"+e+".png");for(e=0;e<38;e++)s_oSpriteLibrary.addSprite("avatar_win_"+e,"./sprites/avatar/avatar_win/avatar_win_"+e+".png");s+=s_oSpriteLibrary.getNumSprites(),s_oSpriteLibrary.loadSprites()},this._onImagesLoaded=function(){e++,n.refreshLoader(Math.floor(e/s*100))},this._onAllImagesLoaded=function(){},this._onRemovePreloader=function(){s_oGameSettings=new CSlotSettings,s_oMsgBox=new CMsgBox,n.unload(),WIN_OCCURRENCE=r.win_occurrence,MIN_REEL_LOOPS=r.min_reel_loop,REEL_DELAY=r.reel_delay,TIME_SHOW_WIN=r.time_show_win,TIME_SHOW_ALL_WINS=r.time_show_all_wins,SLOT_CASH=r.slot_cash,TOTAL_MONEY=parseFloat(r.money),FREESPIN_OCCURRENCE=r.freespin_occurrence,BONUS_OCCURRENCE=r.bonus_occurrence,FREESPIN_SYMBOL_NUM_OCCURR=r.freespin_symbol_num_occur,NUM_FREESPIN=r.num_freespin,BONUS_PRIZE=r.bonus_prize,BONUS_PRIZE_OCCURR=r.bonus_prize_occur,COIN_BET=r.coin_bet,ENABLE_FULLSCREEN=t.fullscreen,NUM_SPIN_FOR_ADS=t.num_spin_ads_showing,PAYTABLE_VALUES=[];for(var e=1;e<11;e++)PAYTABLE_VALUES[e]=t["paytable_symbol_"+e];s_oSoundTrack=playSound("soundtrack",1,!0),this.gotoMenu()},this.gotoMenu=function(){new CMenu,a=STATE_MENU},this.gotoGame=function(){o=new CGame(r),a=STATE_GAME},this.gotoHelp=function(){new CHelp,a=STATE_HELP},this.stopUpdate=function(){i=!1,createjs.Ticker.paused=!0,$("#block_game").css("display","block"),!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||Howler.mute(!0)},this.startUpdate=function(){s_iPrevTime=(new Date).getTime(),i=!0,createjs.Ticker.paused=!1,$("#block_game").css("display","none"),!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||!s_bAudioActive||Howler.mute(!1)},this._update=function(e){var t;!1!==i&&(t=(new Date).getTime(),s_iTimeElaps=t-s_iPrevTime,s_iCntFps++,s_iPrevTime=t,1e3<=(s_iCntTime+=s_iTimeElaps)&&(s_iCurFps=s_iCntFps,s_iCntTime-=1e3,s_iCntFps=0),a===STATE_GAME&&o.update(),s_oStage.update(e))},s_oMain=this,t);ENABLE_CHECK_ORIENTATION=r.check_orientation,SHOW_CREDITS=r.show_credits,s_bAudioActive=t.audio_enable_on_startup,this.initContainer()}var s_bMobile,s_oDrawLayer,s_oStage,s_oAttachSection,s_oMain,s_oSpriteLibrary,s_oMsgBox,s_oGameSettings,s_aSounds,s_bAudioActive=!0,s_bFullscreen=!1,s_iCntTime=0,s_iTimeElaps=0,s_iPrevTime=0,s_iCntFps=0,s_iCurFps=0,s_bLogged=!1,s_oSoundTrack=null;function CTextButton(e,t,i,n,o,s,a,r,l,_){var c,u,h,S,d,p,f,b,E,m;this._init=function(e,t,i,n,o,s,a,r,l){c=!1,u=1,h=[],S=[],m=createBitmap(i),(b=new createjs.Container).x=e,b.y=t,b.regX=i.width/2,b.regY=i.height/2,s_bMobile||(b.cursor="pointer"),b.addChild(m,E),_.addChild(b),E=new CTLText(b,10,5,i.width-20,i.height-10,a,r,s,o,1,l,0,n,!0,!0,!1,!1),this._initListener()},this.unload=function(){b.off("mousedown",d),b.off("pressup",p),_.removeChild(b)},this.setVisible=function(e){b.visible=e},this.setAlign=function(e){E.textAlign=e},this.setTextX=function(e){E.x=e},this.setScale=function(e){u=b.scaleX=b.scaleY=e},this.enable=function(){c=!1},this.disable=function(){c=!0},this._initListener=function(){d=b.on("mousedown",this.buttonDown),p=b.on("pressup",this.buttonRelease)},this.addEventListener=function(e,t,i){h[e]=t,S[e]=i},this.addEventListenerWithParams=function(e,t,i,n){h[e]=t,S[e]=i,f=n},this.buttonRelease=function(){c||(playSound("press_but",1,!1),b.scaleX=u,b.scaleY=u,h[ON_MOUSE_UP]&&h[ON_MOUSE_UP].call(S[ON_MOUSE_UP],f))},this.buttonDown=function(){c||(b.scaleX=.9*u,b.scaleY=.9*u,h[ON_MOUSE_DOWN]&&h[ON_MOUSE_DOWN].call(S[ON_MOUSE_DOWN]))},this.setPosition=function(e,t){b.x=e,b.y=t},this.tweenPosition=function(e,t,i,n,o,s,a){createjs.Tween.get(b).wait(n).to({x:e,y:t},i,o).call(function(){void 0!==s&&s.call(a)})},this.changeText=function(e){E.refreshText(e)},this.setX=function(e){b.x=e},this.setY=function(e){b.y=e},this.getButtonImage=function(){return b},this.getX=function(){return b.x},this.getY=function(){return b.y},this.getSprite=function(){return b},this.getScale=function(){return b.scaleX},this._init(e,t,i,n,o,s,a,r,l)}function CGfxButton(e,t,i,n){var o,s,a,r,l,_,c,u,h=[],S=(this._init=function(e,t,i){o=!1,s=i.width,a=i.height,r=[],l=[],(u=createBitmap(i)).x=e,u.y=t,u.regX=i.width/2,u.regY=i.height/2,u.cursor="pointer",S.addChild(u),this._initListener()},this.unload=function(){u.off("mousedown",_),u.off("pressup",c),S.removeChild(u)},this.enable=function(){o=!1,u.filters=[],u.cache(0,0,s,a)},this.disable=function(){o=!0;var e=(new createjs.ColorMatrix).adjustSaturation(-100).adjustBrightness(40);u.filters=[new createjs.ColorMatrixFilter(e)],u.cache(0,0,s,a)},this.setVisible=function(e){u.visible=e},this._initListener=function(){_=u.on("mousedown",this.buttonDown),c=u.on("pressup",this.buttonRelease)},this.addEventListener=function(e,t,i){r[e]=t,l[e]=i},this.addEventListenerWithParams=function(e,t,i,n){r[e]=t,l[e]=i,h=n},this.buttonRelease=function(){o||(playSound("press_but",1,!1),u.scaleX=1,u.scaleY=1,r[ON_MOUSE_UP]&&r[ON_MOUSE_UP].call(l[ON_MOUSE_UP],h))},this.buttonDown=function(){o||(u.scaleX=.9,u.scaleY=.9,r[ON_MOUSE_DOWN]&&r[ON_MOUSE_DOWN].call(l[ON_MOUSE_DOWN],h))},this.setPosition=function(e,t){u.x=e,u.y=t},this.setX=function(e){u.x=e},this.setY=function(e){u.y=e},this.getButtonImage=function(){return u},this.getX=function(){return u.x},this.getY=function(){return u.y},n);return this._init(e,t,i),this}function CToggle(e,t,i,n,o){var s,a,r,l,_,c,u;this._init=function(e,t,i,n,o){u=void 0!==o?o:s_oStage,a=[],r=[],o=new createjs.SpriteSheet({images:[i],frames:{width:i.width/2,height:i.height,regX:i.width/2/2,regY:i.height/2},animations:{state_true:[0],state_false:[1]}}),(l=createSprite(o,"state_"+(s=n),i.width/2/2,i.height/2,i.width/2,i.height)).x=e,l.y=t,l.stop(),s_bMobile||(l.cursor="pointer"),u.addChild(l),this._initListener()},this.unload=function(){l.off("mousedown",_),l.off("pressup",c),u.removeChild(l)},this._initListener=function(){_=l.on("mousedown",this.buttonDown),c=l.on("pressup",this.buttonRelease)},this.addEventListener=function(e,t,i){a[e]=t,r[e]=i},this.setCursorType=function(e){l.cursor=e},this.setActive=function(e){s=e,l.gotoAndStop("state_"+s)},this.buttonRelease=function(){l.scaleX=1,playSound("press_but",l.scaleY=1,!1),s=!s,l.gotoAndStop("state_"+s),a[ON_MOUSE_UP]&&a[ON_MOUSE_UP].call(r[ON_MOUSE_UP],s)},this.buttonDown=function(){l.scaleX=.9,l.scaleY=.9,a[ON_MOUSE_DOWN]&&a[ON_MOUSE_DOWN].call(r[ON_MOUSE_DOWN])},this.setPosition=function(e,t){l.x=e,l.y=t},this._init(e,t,i,n,o)}function CBetBut(e,t,i,n,o,s,a,r){var l,_,c,u,h,S=[],d=(this._init=function(e,t,i,n,o,s,a){l=!1,_=[],c=[],(h=new createjs.Container).x=e,h.y=t,d.addChild(h),e=new createjs.SpriteSheet({images:[i],frames:{width:i.width/2,height:i.height},animations:{on:[0,1],off:[1,2]}}),(u=createSprite(e,"on",0,0,i.width/2,i.height)).stop(),u.cursor="pointer",h.addChild(u),this._initListener()},this.unload=function(){u.off("mousedown",this.buttonDown),u.off("pressup",this.buttonRelease),d.removeChild(u)},this.disable=function(e){l=e},this.setVisible=function(e){u.visible=e},this.setOn=function(){u.gotoAndStop("on")},this.setOff=function(){u.gotoAndStop("off")},this._initListener=function(){u.on("mousedown",this.buttonDown),u.on("pressup",this.buttonRelease)},this.addEventListener=function(e,t,i){_[e]=t,c[e]=i},this.addEventListenerWithParams=function(e,t,i,n){_[e]=t,c[e]=i,S=n},this.buttonRelease=function(){_[ON_MOUSE_UP]&&!1===l&&(playSound("press_but",1,!1),_[ON_MOUSE_UP].call(c[ON_MOUSE_UP],S))},this.buttonDown=function(){_[ON_MOUSE_DOWN]&&!1===l&&_[ON_MOUSE_DOWN].call(c[ON_MOUSE_DOWN],S)},this.setPosition=function(e,t){u.x=e,u.y=t},this.setX=function(e){u.x=e},this.setY=function(e){u.y=e},this.getButtonImage=function(){return u},this.getX=function(){return u.x},this.getY=function(){return u.y},r);this._init(e,t,i,n,o,s,a)}function CMenu(){var i,n,o,s,a,r,l,_,c,u,h,S,d=null,p=null;this._init=function(){c=createBitmap(s_oSpriteLibrary.getSprite("bg_menu")),s_oAttachSection.addChild(c);var e=s_oSpriteLibrary.getSprite("but_bg"),t=((u=new CGfxButton(CANVAS_WIDTH/2+420,CANVAS_HEIGHT-164,e,s_oStage)).addEventListener(ON_MOUSE_UP,this._onButPlayRelease,this),!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||(e=s_oSpriteLibrary.getSprite("audio_icon"),a=CANVAS_WIDTH-e.width/4-10,r=e.height/2+10,(h=new CToggle(a,r,e,s_bAudioActive,s_oAttachSection)).addEventListener(ON_MOUSE_UP,this._onAudioToggle,this)),s=SHOW_CREDITS?(e=s_oSpriteLibrary.getSprite("but_credits"),i=e.width/2+10,n=e.height/2+10,(_=new CGfxButton(i,n,e,s_oAttachSection)).addEventListener(ON_MOUSE_UP,this._onButCreditsRelease,this),o=i+e.width+10,n):(e=s_oSpriteLibrary.getSprite("but_fullscreen"),o=e.width/4+10,e.height/2+10),(e=window.document).documentElement);d=t.requestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen||t.msRequestFullscreen,p=e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen,(d=!1===ENABLE_FULLSCREEN?!1:d)&&screenfull.isEnabled&&(e=s_oSpriteLibrary.getSprite("but_fullscreen"),(l=new CToggle(o,s,e,s_bFullscreen,s_oAttachSection)).addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this)),(S=new createjs.Shape).graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT),s_oAttachSection.addChild(S),createjs.Tween.get(S).to({alpha:0},400).call(function(){S.visible=!1}),setVolume("soundtrack",1),this.refreshButtonPos(s_iOffsetX,s_iOffsetY)},this.unload=function(){u.unload(),u=null,!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||(h.unload(),h=null),SHOW_CREDITS&&_.unload(),d&&screenfull.isEnabled&&l.unload(),s_oAttachSection.removeChild(c),c=null,s_oAttachSection.removeChild(S),s_oMenu=S=null,setVolume("soundtrack",0)},this.refreshButtonPos=function(e,t){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||h.setPosition(a-e,t+r),SHOW_CREDITS&&_.setPosition(i+e,n+t),d&&screenfull.isEnabled&&l.setPosition(o+e,s+t)},this._onButPlayRelease=function(){tryCheckLogin()},this.exitFromMenu=function(){this.unload(),s_oMain.gotoGame()},this._onAudioToggle=function(){Howler.mute(s_bAudioActive),s_bAudioActive=!s_bAudioActive},this._onButCreditsRelease=function(){new CCreditsPanel},this.resetFullscreenBut=function(){d&&screenfull.isEnabled&&l.setActive(s_bFullscreen)},this._onFullscreenRelease=function(){s_bFullscreen?p.call(window.document):d.call(window.document.documentElement),sizeHandler()},(s_oMenu=this)._init()}var s_oMenu=null;function CGame(){var i,n,o,s,a,r,l,_,c,u,h,S,d,p,f,b,E,m,g,T,w,O,A,N,y,M,L,v,C,B,I,x,P=!1,U=!1,R=null;this._init=function(){a=GAME_STATE_IDLE,u=g=_=r=0,l=(N=[0,1,2,3,4])[0],p=TOTAL_MONEY,d=(S=MIN_BET)*(c=NUM_PAYLINES),o=!1,T=E=b=0,s_oTweenController=new CTweenController,L=createBitmap(s_oSpriteLibrary.getSprite("bg_game")),s_oAttachSection.addChild(L),this._initReels(),L=new createjs.Bitmap(s_oSpriteLibrary.getSprite("mask_slot")),s_oAttachSection.addChild(L);var e={images:[s_oSpriteLibrary.getSprite("logo")],frames:{width:230,height:86,regX:165,regY:0},animations:{normal:[0],freespin:[1,55]}};for(C=new CInterface(S,d,p),this._initStaticSymbols(),(x=new CAvatar(s_oAttachSection)).show(0),e=new createjs.SpriteSheet(e),(M=createSprite(e,"normal",165,0,230,86)).stop(),s_oAttachSection.addChild(M),R=new CPayTablePanel,p<d&&C.disableSpin(),MIN_WIN=s_aSymbolWin[0][s_aSymbolWin[0].length-1],e=0;e<s_aSymbolWin.length;e++)for(var t=s_aSymbolWin[e],i=0;i<t.length;i++)0!==t[i]&&t[i]<MIN_WIN&&(MIN_WIN=t[i]);B=new CBonusPanel,v=new CFreespinPanel(s_oStage),this.refreshButtonPos(s_iOffsetX,s_iOffsetY),playSound("crowd",1,!0),I=new CRechargePanel,p<d&&(I.show(),C.disableSpin()),P=!0},this.unload=function(){stopSound("crowd"),I.unload(),C.unload(),R.unload();for(var e=0;e<w.length;e++)w[e].unload();for(e=0;e<NUM_ROWS;e++)for(var t=0;t<NUM_REELS;t++)O[e][t].unload();s_oAttachSection.removeAllChildren(),s_oGame=null},this.refreshButtonPos=function(e,t){C.refreshButtonPos(e,t),R.refreshButtonPos(e,t),n=s_iOffsetY<40?(i=800,-2):(i=1432,80),M.x=i,M.y=n+t,x.refreshButtonPos(e,t)},this._initReels=function(){var e=REEL_OFFSET_X,t=REEL_OFFSET_Y,i=0;w=[];for(var n=0;n<NUM_REELS;n++)w[n]=new CReelColumn(n,e,t,i),w[n+NUM_REELS]=new CReelColumn(n+NUM_REELS,e,t+(SYMBOL_HEIGHT+SPACE_HEIGHT_BETWEEN_SYMBOLS)*NUM_ROWS,i),e+=SYMBOL_WIDTH+SPACE_BETWEEN_SYMBOLS,i+=REEL_DELAY},this._initStaticSymbols=function(){var e=REEL_OFFSET_X,t=REEL_OFFSET_Y;O=[];for(var i=0;i<NUM_ROWS;i++){O[i]=[];for(var n=0;n<NUM_REELS;n++){var o=new CStaticSymbolCell(i,n,e,t);O[i][n]=o,e+=SYMBOL_WIDTH+SPACE_BETWEEN_SYMBOLS}e=REEL_OFFSET_X,t+=SYMBOL_HEIGHT+SPACE_HEIGHT_BETWEEN_SYMBOLS}},this.generateLosingPattern=function(){for(var e=[],t=0;t<NUM_ROWS;t++){var i=Math.floor(Math.random()*(s_aRandSymbols.length-2)),i=s_aRandSymbols[i];e[t]=i}for(y=[],t=0;t<NUM_ROWS;t++){y[t]=[];for(var n=0;n<NUM_REELS;n++)if(0===n)y[t][n]=e[t];else{for(;i=Math.floor(Math.random()*(s_aRandSymbols.length-2)),i=s_aRandSymbols[i],e[0]===i||e[1]===i||e[2]===i;);y[t][n]=i}}A=[],U=!0},this._generateRandSymbols=function(){for(var e=[],t=0;t<NUM_ROWS;t++)e[t]=s_aRandSymbols[Math.floor(Math.random()*s_aRandSymbols.length)];return e},this.reelArrived=function(e,t){MIN_REEL_LOOPS<r?l===t?!1===w[e].isReadyToStop()&&((t=e)<NUM_REELS?(w[t+=NUM_REELS].setReadyToStop(),w[e].restart([y[0][e],y[1][e],y[2][e]],!0)):(w[t-=NUM_REELS].setReadyToStop(),w[e].restart([y[0][t],y[1][t],y[2][t]],!0))):w[e].restart(this._generateRandSymbols(),!1):(w[e].restart(this._generateRandSymbols(),!1),U&&0===e&&r++)},this.stopNextReel=function(e,t){0==++_%2?(l=N[_/2],_===2*NUM_REELS&&this._endReelAnimation()):playSound(t?"reel_stop_bonus":e?"reel_stop_freespin":"reel_stop",1,!1)},this._endReelAnimation=function(){if(U=!1,h=_=r=0,l=N[0],0<E&&(C.disableGuiButtons(),C.disableSpin()),"freespin"===M.currentAnimation&&!1===s&&C.refreshFreeSpinNum(b),0<A.length){x.show(1);for(var e=0;e<A.length;e++){0<A[e].line&&(R.highlightCombo(A[e].value,A[e].num_win),C.showLine(A[e].line));for(var t=A[e].list,i=0;i<t.length;i++)O[t[i].row][t[i].col].showWinFrame()}"freespin"===M.currentAnimation&&0===b&&(M.gotoAndStop("normal"),C.refreshFreeSpinNum(""),C.setSpinState(SPIN_BUT_STATE_SPIN)),0<f&&C.refreshWinText(f),u=0,a=GAME_STATE_SHOW_ALL_WIN,playSound("avatar_win",1,!1),E!==BONUS_GOALKEEPER&&C.refreshMoney(p)}else 0<b?(C.disableSpin(),this.onSpin()):("freespin"===M.currentAnimation&&(M.gotoAndStop("normal"),C.refreshFreeSpinNum(""),C.setSpinState(SPIN_BUT_STATE_SPIN)),o?p<d&&0===b?(this.resetCoinBet(),o=!1,C.enableGuiButtons()):this.onSpin():a=GAME_STATE_IDLE);p<d&&0===b?(this.resetCoinBet(),o=!1,C.enableGuiButtons()):o||0!==b||0!==E||(C.enableGuiButtons(),C.disableBetBut(!1)),++T===NUM_SPIN_FOR_ADS&&(T=0,$(s_oMain).trigger("show_interlevel_ad")),$(s_oMain).trigger("save_score",p)},this.hidePayTable=function(){R.hide()},this.showWin=function(){if(0<h){stopSound("avatar_win");0<(t=A[h-1].line)&&C.hideLine(t);for(var e=A[h-1].list,t=0;t<e.length;t++)w[e[t].col].setVisible(e[t].row,!0),w[e[t].col+NUM_REELS].setVisible(e[t].row,!0)}if(h===A.length)h=0,s?(s=!1,v.show(b)):0<b?(C.disableSpin(),this.onSpin()):E===BONUS_GOALKEEPER?B.isVisible()||(this._hideAllWins(),B.show(BONUS_PRIZE[m]),a=GAME_STATE_BONUS):o?this.onSpin():(C.enableGuiButtons(),C.disableBetBut(!1),a=GAME_STATE_IDLE);else{if(t=A[h].line,e=A[h].list,0===t){var i=Math.floor(e.length/2);t=e[i].row,i=e[i].col}else{C.showLine(t);var i=2,n=!1;for(e.length<3?A[h].value===FREESPIN_SYMBOL?(i=e[0].col,t=e[0].row,n=!0):t=e[i=e.length-1].row:t=e[i].row;!n&&y[t][i]===WILD_SYMBOL;){if(--i<0){t=e[i=0].row;break}t=e[i].row}}e={x:0,y:0},0===t?0===i?n={x:0,y:0}:e=4===i?(n={x:SYMBOL_ANIM_WIDTH,y:0},{x:SYMBOL_WIDTH,y:0}):(n={x:SYMBOL_ANIM_WIDTH/2,y:0},{x:SYMBOL_WIDTH/2,y:0}):e=1===t?0===i?(n={x:0,y:SYMBOL_ANIM_HEIGHT/2},{x:0,y:SYMBOL_HEIGHT/2}):4===i?(n={x:SYMBOL_ANIM_WIDTH,y:SYMBOL_ANIM_HEIGHT/2},{x:SYMBOL_WIDTH,y:SYMBOL_HEIGHT/2}):(n={x:SYMBOL_ANIM_WIDTH/2,y:SYMBOL_ANIM_HEIGHT/2},{x:SYMBOL_WIDTH/2,y:SYMBOL_HEIGHT/2}):0===i?(n={x:0,y:SYMBOL_ANIM_HEIGHT},{x:0,y:SYMBOL_HEIGHT}):4===i?(n={x:SYMBOL_ANIM_WIDTH,y:SYMBOL_ANIM_HEIGHT},{x:SYMBOL_WIDTH,y:SYMBOL_HEIGHT}):(n={x:SYMBOL_ANIM_WIDTH/2,y:SYMBOL_ANIM_HEIGHT},{x:SYMBOL_WIDTH/2,y:SYMBOL_HEIGHT}),O[t][i].show(A[h].value,A[h].amount,e,n,o||!1===s&&0<b?1:3),h++}},this._hideAllWins=function(){for(var e=0;e<NUM_ROWS;e++)for(var t=0;t<NUM_REELS;t++)O[e][t].hideWinFrame();C.hideAllLines()},this._prepareForWinsShowing=function(){this._hideAllWins(),h=u=0,u=TIME_SHOW_WIN,a=GAME_STATE_SHOW_WIN,this.showWin(),0===b&&C.setSpinState(SPIN_BUT_STATE_SKIP)},this.activateLines=function(e){c=e,this.removeWinShowing(),d=e=S*c,C.refreshTotalBet(d),C.refreshNumLines(c),p<e?C.disableSpin():C.enableSpin()},this.resetCoinBet=function(){g=0;var e=parseFloat(COIN_BET[g]),t=e*c;S=e,S=Math.floor(100*S)/100,d=t,C.refreshBet(S),C.refreshTotalBet(d),C.enableSpin()},this.addLine=function(){c===NUM_PAYLINES?c=1:c++,d=S*c,d=Math.floor(100*d)/100,C.refreshTotalBet(d),C.refreshNumLines(c),C.enableSpin()},this.changeCoinBet=function(){++g===COIN_BET.length&&(g=0);var e=parseFloat(COIN_BET[g]),t=e*c;S=e,S=Math.floor(100*S)/100,d=t,d=Math.floor(100*d)/100,C.refreshBet(S),C.refreshTotalBet(d),C.enableSpin()},this.onMaxBet=function(){var e;p<MAX_BET*NUM_PAYLINES?s_oMsgBox.show(TEXT_NO_MAX_BET):(S=e=MAX_BET,d=e*=c=NUM_PAYLINES,C.refreshBet(S),C.refreshTotalBet(d),C.refreshNumLines(c),p<e?(C.disableSpin(),I.show()):(C.enableSpin(),this.onSpin()))},this.removeWinShowing=function(){R.resetHighlightCombo(),C.resetWin();for(var e=0;e<NUM_ROWS;e++)for(var t=0;t<NUM_REELS;t++)O[e][t].hide(),w[t].setVisible(e,!0),w[t+NUM_REELS].setVisible(e,!0);for(e=0;e<w.length;e++)w[e].activate();a=GAME_STATE_IDLE},this.forceStopReel=function(){0===b&&(o=!1),a=GAME_STATE_IDLE;for(var e=0;e<NUM_REELS;e++)w[e].forceStop([y[0][e],y[1][e],y[2][e]],REEL_OFFSET_Y),w[e+NUM_REELS].forceStop(null,REEL_OFFSET_Y+(SYMBOL_HEIGHT+SPACE_HEIGHT_BETWEEN_SYMBOLS)*NUM_ROWS);this._endReelAnimation()},this.setMoney=function(e){s_aSession.iMoney=p=e,C.refreshMoney(p),C.enableGuiButtons()},this.onSpin=function(){p<d&&0===b?(C.enableGuiButtons(),o=!1,I.show()):(stopSound("avatar_win"),playSound("spin_but",1,!1),C.disableBetBut(!0),this.removeWinShowing(),!0===s_bLogged?(d="freespin"===M.currentAnimation?0:S*c,tryCallSpin(S,d,c)):this.generateLosingPattern(),this._hideAllWins(),C.disableGuiButtons())},this.onSkip=function(){0<E?(this._hideAllWins(),B.show(BONUS_PRIZE[m]),a=GAME_STATE_BONUS):this.onSpin()},this.onAutoSpin=function(){o=!0,this.onSpin()},this.onStopAutoSpin=function(){o=!1,a!==GAME_STATE_SPINNING&&a!==GAME_STATE_BONUS&&C.enableGuiButtons()},this.generateLosingPattern=function(){for(var e=[],t=0;t<NUM_ROWS;t++){var i=Math.floor(Math.random()*(s_aRandSymbols.length-2)),i=s_aRandSymbols[i];e[t]=i}for(y=[],t=0;t<NUM_ROWS;t++){y[t]=[];for(var n=0;n<NUM_REELS;n++)if(0===n)y[t][n]=e[t];else{for(;i=Math.floor(Math.random()*(s_aRandSymbols.length-2)),i=s_aRandSymbols[i],e[0]===i||e[1]===i||e[2]===i;);y[t][n]=i}}A=[],U=!0},this.onSpinReceived=function(e){p-=d,C.refreshMoney(p),"true"===e.res?(b=parseInt(e.num_freespin),"true"===e.win?(y=JSON.parse(e.pattern),A=JSON.parse(e.win_lines),s=!1,1===parseInt(e.freespin)?(E=BONUS_FREESPIN,s=!(o=!1)):0<parseInt(e.bonus)?(E=BONUS_GOALKEEPER,o=!1,m=e.bonus_prize):E=0,f=parseFloat(e.tot_win)):(E=0,y=JSON.parse(e.pattern),A=[]),U=!0,p=parseFloat(e.money)):s_oGame.generateLosingPattern(),a=GAME_STATE_SPINNING},this.onInfoClicked=function(){a!==GAME_STATE_SPINNING&&(R.isVisible()?R.hide():R.show())},this.exitFromFreespinPanel=function(){C.refreshFreeSpinNum(b),M.gotoAndPlay("freespin"),C.setSpinState(SPIN_BUT_STATE_FREESPIN),C.disableSpin(),this.onSpin()},this.exitFromBonus=function(){$(s_oMain).trigger("bonus_end",p),C.refreshMoney(p),o?this.onSpin():(this.removeWinShowing(),C.enableGuiButtons(),C.disableBetBut(!1),C.enableSpin()),$(s_oMain).trigger("save_score",p)},this.onExit=function(){this.unload(),s_oMain.gotoMenu(),$(s_oMain).trigger("end_session"),$(s_oMain).trigger("share_event",{img:"200x200.jpg",title:TEXT_CONGRATULATIONS,msg:TEXT_MSG_SHARE1+p+TEXT_MSG_SHARE2,msg_share:TEXT_MSG_SHARING1+p+TEXT_MSG_SHARING2})},this.getState=function(){return a},this.update=function(){if(!1!==P){switch(a){case GAME_STATE_IDLE:if(o)return;0===b&&TIME_SPIN_BUT_CHANGE<(u+=s_iTimeElaps)&&(u=0,C.toggleAutoSpinImage()),C.update();break;case GAME_STATE_SPINNING:for(var e=0;e<w.length;e++)w[e].update();break;case GAME_STATE_SHOW_ALL_WIN:TIME_SHOW_ALL_WINS<(u+=s_iTimeElaps)&&this._prepareForWinsShowing();break;case GAME_STATE_BONUS:B.update()}x.update()}},(s_oGame=this)._init()}var s_oTweenController,s_oGame=null;function CReelColumn(e,t,i,n){var o,s,a,r,l,_,c,u,h,S,d,p,f,b,E;this._init=function(e,t,i,n){a=s=o=!1,_=n,l=(r=e)<NUM_REELS?r:r-NUM_REELS,h=c=0,S=MAX_FRAMES_REEL_EASE,u=REEL_STATE_START,p=(d=i)+(SYMBOL_HEIGHT+SPACE_HEIGHT_BETWEEN_SYMBOLS)*NUM_ROWS,this.initContainer(t,i)},this.initContainer=function(e,t){(E=new createjs.Container).x=e,E.y=t;var i=0;f=[],b=[];for(var n=0;n<NUM_ROWS;n++){var o=s_aRandSymbols[Math.floor(Math.random()*s_aRandSymbols.length)],s=createSprite(s_aSymbolData[o],"static",0,0,SYMBOL_WIDTH,SYMBOL_HEIGHT);s.stop(),s.x=0,s.y=i,E.addChild(s),f[n]=s,b[n]=o,i+=SYMBOL_HEIGHT+SPACE_HEIGHT_BETWEEN_SYMBOLS}s_oAttachSection.addChild(E)},this.unload=function(){s_oAttachSection.removeChild(E)},this.activate=function(){d=E.y,p=d+(SYMBOL_HEIGHT+SPACE_HEIGHT_BETWEEN_SYMBOLS)*NUM_ROWS,o=!0},this._setSymbol=function(e){E.removeAllChildren();for(var t=0,i=0;i<e.length;i++){var n=new createjs.Sprite(s_aSymbolData[e[i]],"static",0,0,SYMBOL_WIDTH,SYMBOL_HEIGHT);n.stop(),n.x=0,n.y=t,E.addChild(n),f[i]=n,b[i]=e[i],t+=SYMBOL_HEIGHT+SPACE_HEIGHT_BETWEEN_SYMBOLS}},this.forceStop=function(e,t){null!==e&&this._setSymbol(e),E.y=t,S=MAX_FRAMES_REEL_EASE,u=REEL_STATE_START,c=h=0,a=s=o=!1},this.setVisible=function(e,t){f[e].visible=t},this.restart=function(e,t){if(E.y=d=REEL_START_Y,p=d+(SYMBOL_HEIGHT+SPACE_HEIGHT_BETWEEN_SYMBOLS)*NUM_ROWS,this._setSymbol(e),s=t){S=MAX_FRAMES_REEL_EASE,u=REEL_STATE_STOP;for(var i=h=0;i<NUM_ROWS;i++)f[i].gotoAndStop("static");a=!0}else for(i=0;i<NUM_ROWS;i++)f[i].gotoAndStop("moving")},this.setReadyToStop=function(){h=0,S=MAX_FRAMES_REEL_EASE,u=REEL_STATE_STOP},this.isReadyToStop=function(){return s},this.getPosUpLeft=function(e){return{x:E.x,y:E.y+(SYMBOL_HEIGHT+SPACE_HEIGHT_BETWEEN_SYMBOLS)*e}},this.getY=function(){return E.y},this._updateStart=function(){0===h&&r<NUM_REELS&&playSound("start_reel",1,!1),S<++h&&(h=0,S/=2,u++,d=E.y,p=d+(SYMBOL_HEIGHT+SPACE_HEIGHT_BETWEEN_SYMBOLS)*NUM_ROWS);var e=s_oTweenController.easeInBack(h,0,1,S),e=s_oTweenController.tweenValue(d,p,e);E.y=e},this._updateMoving=function(){S<++h&&(h=0,d=E.y,p=d+(SYMBOL_HEIGHT+SPACE_HEIGHT_BETWEEN_SYMBOLS)*NUM_ROWS);var e=s_oTweenController.easeLinear(h,0,1,S),e=s_oTweenController.tweenValue(d,p,e);E.y=e},this._updateStopping=function(){var e;S<=++h?(S=MAX_FRAMES_REEL_EASE,u=REEL_STATE_START,c=h=0,s=o=!1,a&&(a=!1,E.y=REEL_OFFSET_Y),s_oGame.stopNextReel(b[0]===FREESPIN_SYMBOL||b[1]===FREESPIN_SYMBOL||b[2]===FREESPIN_SYMBOL,b[0]===BONUS_SYMBOL||b[1]===BONUS_SYMBOL||b[2]===BONUS_SYMBOL)):(e=s_oTweenController.easeOutCubic(h,0,1,S),e=s_oTweenController.tweenValue(d,p,e),E.y=e)},this.update=function(){if(!1!==o&&_<++c)switch(!1===s&&E.y>REEL_ARRIVAL_Y&&s_oGame.reelArrived(r,l),u){case REEL_STATE_START:this._updateStart();break;case REEL_STATE_MOVING:this._updateMoving();break;case REEL_STATE_STOP:this._updateStopping()}},this._init(e,t,i,n)}function CInterface(e,t,i){var s,a,r,l,_,c,u,h,S,d,p,o,f,b,E,m,g,T,w,O,A,N,y,M,L,v=null,C=null;return this._init=function(e,t,i){var n=s_oSpriteLibrary.getSprite("but_exit"),o=(s=CANVAS_WIDTH-n.width/2-2,a=n.height/2+2,(b=new CGfxButton(s,a,n,s_oAttachSection)).addEventListener(ON_MOUSE_UP,this._onExit,this),!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||(n=s_oSpriteLibrary.getSprite("audio_icon"),d=s-n.width/2-2,p=n.height/2+2,(T=new CToggle(d,p,n,s_bAudioActive,s_oAttachSection)).addEventListener(ON_MOUSE_UP,this._onAudioToggle,this)),(n=window.document).documentElement);v=o.requestFullscreen||o.mozRequestFullScreen||o.webkitRequestFullScreen||o.msRequestFullscreen,C=n.exitFullscreen||n.mozCancelFullScreen||n.webkitExitFullscreen||n.msExitFullscreen,(v=!1===ENABLE_FULLSCREEN?!1:v)&&screenfull.isEnabled&&(n=s_oSpriteLibrary.getSprite("but_fullscreen"),_=n.width/4+2,c=n.height/2+2,(A=new CToggle(_,c,n,s_bFullscreen,s_oAttachSection)).addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this)),this._initPaylines(),n=s_oSpriteLibrary.getSprite("info_but"),u=CANVAS_HEIGHT-n.height/2-80,(m=new CTextButton(420,u,n,TEXT_PAYTABLE,FONT_GAME_1,"#ffffff",24,"center",0,s_oAttachSection)).addEventListener(ON_MOUSE_UP,this._onInfo,this),n=s_oSpriteLibrary.getSprite("but_lines_bg"),u=CANVAS_HEIGHT-n.height/2-80,(g=new CTextButton(640,u,n,TEXT_LINES+" "+NUM_PAYLINES,FONT_GAME_1,"#ffffff",24,"center",0,s_oAttachSection)).addEventListener(ON_MOUSE_UP,this._onAddLine,this),n=s_oSpriteLibrary.getSprite("coin_but"),u=CANVAS_HEIGHT-n.height/2-80,(w=new CTextButton(860,u,n,TEXT_COIN+" "+e.toFixed(2),FONT_GAME_1,"#ffffff",24,"center",0,s_oAttachSection)).addEventListener(ON_MOUSE_UP,this._onBet,this),n=s_oSpriteLibrary.getSprite("but_maxbet_bg"),u=CANVAS_HEIGHT-n.height/2-80,(O=new CTextButton(1080,u,n,TEXT_MAX_BET,FONT_GAME_1,"#ffffff",25,"center",0,s_oAttachSection)).addEventListener(ON_MOUSE_UP,this._onMaxBet,this),n=s_oSpriteLibrary.getSprite("but_spin"),h=CANVAS_WIDTH-100,S=CANVAS_HEIGHT-n.height/2,(E=new CSpinBut(h-s_iOffsetX,S-s_iOffsetY,n,n.width/5,n.height,s_oAttachSection)).addEventListener(ON_MOUSE_UP,this._onSpin,this),N=new CTLText(s_oAttachSection,320,CANVAS_HEIGHT-162,230,24,24,"center","#ffde00",FONT_GAME_2,1,0,0,TEXT_MONEY+": "+i.toFixed(2)+TEXT_CURRENCY,!0,!0,!1,!1),y=new CTLText(s_oAttachSection,600,CANVAS_HEIGHT-162,300,24,24,"center","#ffde00",FONT_GAME_2,1,0,0,TEXT_BET+": "+t.toFixed(2)+TEXT_CURRENCY,!0,!0,!1,!1),M=new CTLText(s_oAttachSection,910,CANVAS_HEIGHT-162,305,24,24,"center","#ffde00",FONT_GAME_2,1,0,0,TEXT_WIN+": 0"+TEXT_CURRENCY,!0,!0,!1,!1),r=CANVAS_WIDTH-108,l=CANVAS_HEIGHT-108,(L=new createjs.Text("","70px "+FONT_GAME_1,"#ffde00")).x=r-s_iOffsetX,L.y=l-s_iOffsetY,L.textAlign="center",L.textBaseline="alphabetic",s_oAttachSection.addChild(L),this.refreshButtonPos(s_iOffsetX,s_iOffsetY)},this.unload=function(){b.unload(),b=null,E.unload(),E=null,m.unload(),m=null,g.unload(),g=null,w.unload(),w=null,O.unload(),O=null,!1===DISABLE_SOUND_MOBILE&&(T.unload(),T=null);for(var e=0;e<NUM_PAYLINES;e++)o[e].unload();v&&screenfull.isEnabled&&A.unload(),s_oInterface=null},this.refreshButtonPos=function(e,t){b.setPosition(s-e,t+a),!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||T.setPosition(d-e,t+p),CANVAS_WIDTH-300<h-e&&(E.setPosition(h-e,S-t),L.x=r-e,L.y=l-t),v&&screenfull.isEnabled&&A.setPosition(_+e,c+t)},this._initPaylines=function(){var e=s_oSpriteLibrary.getSprite("bet_but4"),t=(o=[],e.height/2),i=77+t,n=new CBetBut(200+e.width/2,i,s_oSpriteLibrary.getSprite("bet_but4"),"4",FONT_GAME_1,"#ffd202",24,s_oAttachSection);for(n.addEventListenerWithParams(ON_MOUSE_UP,this._onBetLineClicked,this,4),o[3]=n,(n=new CBetBut(200+e.width/2,i+=50,s_oSpriteLibrary.getSprite("bet_but2"),"2",FONT_GAME_1,"#ffd202",24,s_oAttachSection)).addEventListenerWithParams(ON_MOUSE_UP,this._onBetLineClicked,this,2),o[1]=n,(n=new CBetBut(200+e.width/2,i+=50,s_oSpriteLibrary.getSprite("bet_but20"),"20",FONT_GAME_1,"#ffd202",24,s_oAttachSection)).addEventListenerWithParams(ON_MOUSE_UP,this._onBetLineClicked,this,20),o[19]=n,(n=new CBetBut(200+e.width/2,i+=50,s_oSpriteLibrary.getSprite("bet_but17"),"17",FONT_GAME_1,"#ffd202",24,s_oAttachSection)).addEventListenerWithParams(ON_MOUSE_UP,this._onBetLineClicked,this,17),o[16]=n,(n=new CBetBut(200+e.width/2,i+=50,s_oSpriteLibrary.getSprite("bet_but10"),"10",FONT_GAME_1,"#ffd202",24,s_oAttachSection)).addEventListenerWithParams(ON_MOUSE_UP,this._onBetLineClicked,this,10),o[9]=n,(n=new CBetBut(200+e.width/2,i+=50,s_oSpriteLibrary.getSprite("bet_but1"),"1",FONT_GAME_1,"#ffd202",24,s_oAttachSection)).addEventListenerWithParams(ON_MOUSE_UP,this._onBetLineClicked,this,1),o[0]=n,(n=new CBetBut(200+e.width/2,i+=51,s_oSpriteLibrary.getSprite("bet_but11"),"11",FONT_GAME_1,"#ffd202",24,s_oAttachSection)).addEventListenerWithParams(ON_MOUSE_UP,this._onBetLineClicked,this,11),o[10]=n,(n=new CBetBut(200+e.width/2,i+=50,s_oSpriteLibrary.getSprite("bet_but16"),"16",FONT_GAME_1,"#ffd202",24,s_oAttachSection)).addEventListenerWithParams(ON_MOUSE_UP,this._onBetLineClicked,this,16),o[15]=n,(n=new CBetBut(200+e.width/2,i+=50,s_oSpriteLibrary.getSprite("bet_but3"),"3",FONT_GAME_1,"#ffd202",24,s_oAttachSection)).addEventListenerWithParams(ON_MOUSE_UP,this._onBetLineClicked,this,3),o[2]=n,(n=new CBetBut(200+e.width/2,i+50,s_oSpriteLibrary.getSprite("bet_but5"),"5",FONT_GAME_1,"#ffd202",24,s_oAttachSection)).addEventListenerWithParams(ON_MOUSE_UP,this._onBetLineClicked,this,5),o[4]=n,(n=new CBetBut(1175+e.width/2,i=77+t,s_oSpriteLibrary.getSprite("bet_but12"),"12",FONT_GAME_1,"#ffd202",24,s_oAttachSection)).addEventListenerWithParams(ON_MOUSE_UP,this._onBetLineClicked,this,12),o[11]=n,(n=new CBetBut(1175+e.width/2,i+=50,s_oSpriteLibrary.getSprite("bet_but14"),"14",FONT_GAME_1,"#ffd202",24,s_oAttachSection)).addEventListenerWithParams(ON_MOUSE_UP,this._onBetLineClicked,this,14),o[13]=n,(n=new CBetBut(1175+e.width/2,i+=50,s_oSpriteLibrary.getSprite("bet_but9"),"9",FONT_GAME_1,"#ffd202",24,s_oAttachSection)).addEventListenerWithParams(ON_MOUSE_UP,this._onBetLineClicked,this,9),o[8]=n,(n=new CBetBut(1175+e.width/2,i+=50,s_oSpriteLibrary.getSprite("bet_but18"),"18",FONT_GAME_1,"#ffd202",24,s_oAttachSection)).addEventListenerWithParams(ON_MOUSE_UP,this._onBetLineClicked,this,18),o[17]=n,(n=new CBetBut(1175+e.width/2,i+=50,s_oSpriteLibrary.getSprite("bet_but6"),"6",FONT_GAME_1,"#ffd202",24,s_oAttachSection)).addEventListenerWithParams(ON_MOUSE_UP,this._onBetLineClicked,this,6),o[5]=n,(n=new CBetBut(1175+e.width/2,i+=51,s_oSpriteLibrary.getSprite("bet_but7"),"7",FONT_GAME_1,"#ffd202",24,s_oAttachSection)).addEventListenerWithParams(ON_MOUSE_UP,this._onBetLineClicked,this,7),o[6]=n,(n=new CBetBut(1175+e.width/2,i+=50,s_oSpriteLibrary.getSprite("bet_but19"),"19",FONT_GAME_1,"#ffd202",24,s_oAttachSection)).addEventListenerWithParams(ON_MOUSE_UP,this._onBetLineClicked,this,19),o[18]=n,(n=new CBetBut(1175+e.width/2,i+=50,s_oSpriteLibrary.getSprite("bet_but8"),"8",FONT_GAME_1,"#ffd202",24,s_oAttachSection)).addEventListenerWithParams(ON_MOUSE_UP,this._onBetLineClicked,this,8),o[7]=n,(n=new CBetBut(1175+e.width/2,i+=50,s_oSpriteLibrary.getSprite("bet_but13"),"13",FONT_GAME_1,"#ffd202",24,s_oAttachSection)).addEventListenerWithParams(ON_MOUSE_UP,this._onBetLineClicked,this,13),o[12]=n,(n=new CBetBut(1175+e.width/2,i+50,s_oSpriteLibrary.getSprite("bet_but15"),"15",FONT_GAME_1,"#ffd202",24,s_oAttachSection)).addEventListenerWithParams(ON_MOUSE_UP,this._onBetLineClicked,this,15),o[14]=n,f=[],e=0;e<NUM_PAYLINES;e++)(t=createBitmap(s_oSpriteLibrary.getSprite("payline_"+(e+1)))).visible=!1,s_oAttachSection.addChild(t),f[e]=t},this.refreshMoney=function(e){N.refreshText(TEXT_MONEY+": "+e.toFixed(2)+TEXT_CURRENCY)},this.refreshBet=function(e){w.changeText(TEXT_COIN+" "+e.toFixed(2))},this.refreshTotalBet=function(e){y.refreshText(TEXT_BET+": "+e.toFixed(2)+TEXT_CURRENCY)},this.refreshNumLines=function(e){g.changeText(TEXT_LINES+" "+e);for(var t=0;t<NUM_PAYLINES;t++)t<e?(o[t].setOn(),f[t].visible=!0):o[t].setOff();setTimeout(function(){for(var e=0;e<NUM_PAYLINES;e++)f[e].visible=!1},1e3)},this.resetWin=function(){M.refreshText(TEXT_WIN+": 0"+TEXT_CURRENCY)},this.refreshWinText=function(e){M.refreshText(TEXT_WIN+": "+e.toFixed(2)+TEXT_CURRENCY)},this.refreshFreeSpinNum=function(e){L.text=e},this.showLine=function(e){f[e-1].visible=!0},this.hideLine=function(e){f[e-1].visible=!1},this.hideAllLines=function(){for(var e=0;e<NUM_PAYLINES;e++)f[e].visible=!1},this.disableBetBut=function(e){for(var t=0;t<NUM_PAYLINES;t++)o[t].disable(e)},this.enableGuiButtons=function(){E.enable(),O.enable(),w.enable(),g.enable(),m.enable()},this.enableSpin=function(){E.enable(),O.enable()},this.disableSpin=function(){E.disable(),O.disable()},this.disableGuiButtons=function(){E.getState()!==SPIN_BUT_STATE_FREESPIN&&E.setState(SPIN_BUT_STATE_STOP),O.disable(),w.disable(),g.disable(),m.disable()},this.toggleAutoSpinImage=function(){E.toggleAutoSpinImage()},this.setSpinState=function(e){E.setState(e)},this._onBetLineClicked=function(e){this.refreshNumLines(e),s_oGame.activateLines(e)},this._onExit=function(){s_oGame.onExit()},this._onSpin=function(e){e===SPIN_BUT_STATE_AUTOSPIN?s_oGame.onAutoSpin():e===SPIN_BUT_STATE_SPIN||e===SPIN_BUT_STATE_AUTOSPIN?s_oGame.onSpin():e===SPIN_BUT_STATE_SKIP?s_oGame.onSkip():s_oGame.forceStopReel()},this._onAddLine=function(){s_oGame.addLine()},this._onInfo=function(){s_oGame.onInfoClicked()},this._onBet=function(){s_oGame.changeCoinBet()},this._onMaxBet=function(){s_oGame.onMaxBet()},this.resetFullscreenBut=function(){v&&screenfull.isEnabled&&A.setActive(s_bFullscreen)},this._onFullscreenRelease=function(){s_bFullscreen?C.call(window.document):v.call(window.document.documentElement),sizeHandler()},this._onAudioToggle=function(){Howler.mute(s_bAudioActive),s_bAudioActive=!s_bAudioActive},this.update=function(){E.update()},(s_oInterface=this)._init(e,t,i),this}var s_oInterface=null;function CPayTablePanel(){var i,n,o,c,u,s,a,r,l,_,h,S;this._init=function(){o=0,s=[],(h=new createjs.Container).on("click",function(){}),h.visible=!1,s_oAttachSection.addChild(h);var e=new createjs.Container,t=(h.addChild(e),createBitmap(s_oSpriteLibrary.getSprite("paytable1")));e.addChild(t),this._createPayouts(e),s[0]=e,(e=new createjs.Container).visible=!1,h.addChild(e),t=createBitmap(s_oSpriteLibrary.getSprite("paytable2")),e.addChild(t),s[1]=e,a=s[o],(e=new createjs.Container).visible=!1,h.addChild(e),t=createBitmap(s_oSpriteLibrary.getSprite("paytable3")),e.addChild(t),new CTLText(e,770,248,400,100,28,"center","#fff",FONT_GAME_1,1,0,0,TEXT_HELP_BONUS1,!0,!0,!0,!1),new CTLText(e,770,400,400,180,40,"center","#fff",FONT_GAME_1,1,0,0,TEXT_HELP_BONUS2,!0,!0,!0,!1),s[2]=e,(e=new createjs.Container).visible=!1,h.addChild(e),t=createBitmap(s_oSpriteLibrary.getSprite("paytable4")),e.addChild(t),new CTLText(e,CANVAS_WIDTH/2-210,410,420,170,40,"center","#fff",FONT_GAME_1,1,0,0,TEXT_HELP_FREESPIN,!0,!0,!0,!1),s[3]=e,a=s[o],(l=new CGfxButton(CANVAS_WIDTH-290,CANVAS_HEIGHT-160,s_oSpriteLibrary.getSprite("but_arrow_next"),h)).addEventListener(ON_MOUSE_UP,this._onNext,this),(_=new CGfxButton(290,CANVAS_HEIGHT-160,s_oSpriteLibrary.getSprite("but_arrow_prev"),h)).addEventListener(ON_MOUSE_UP,this._onPrev,this),e=s_oSpriteLibrary.getSprite("but_credits"),i=e.width/2+2,n=e.height/2+2,(S=new CGfxButton(i,n,e,h)).addEventListener(ON_MOUSE_UP,this._onCredits,this),e=s_oSpriteLibrary.getSprite("but_exit_info"),(r=new CGfxButton(1220,154,e,h)).addEventListener(ON_MOUSE_UP,this._onExit,this)},this.unload=function(){h.off("click",function(){}),r.unload(),l.unload(),_.unload(),S.unload(),s_oAttachSection.removeChild(h);for(var e=0;e<c.length;e++)h.removeChild(c[e])},this._createPayouts=function(e){c=[],u=[];for(var t=[{x:530,y:250},{x:750,y:250},{x:970,y:250},{x:421,y:360},{x:641,y:360},{x:861,y:360},{x:1081,y:360},{x:530,y:470},{x:750,y:470},{x:970,y:470}],i=0,n=0;n<s_aSymbolWin.length;n++){var o=s_aSymbolWin[n];do{var s=o.indexOf(0)}while(-1!==s&&o.splice(s,1),-1!==s);if(0!==(s=o.length)){var a=24,r=(4===s&&(a=18),t[i].y);c[n]=[],u[n]=[];for(var l=0;l<s;l++){var _=new CTLText(e,t[i].x,r,35,21,21,"left","#fff",FONT_GAME_1,1,0,0,"X"+(5-l),!0,!0,!1,!1),_=new CTLText(e,(c[n][l]=_).getX()+40,_.getY(),50,21,21,"left","#ffff00",FONT_GAME_1,1,0,0,o[s-l-1],!0,!0,!1,!1);u[n][l]=_,r+=a}i++}}},this._onNext=function(){o===s.length-1?o=0:o++,a.visible=!1,s[o].visible=!0,a=s[o]},this._onPrev=function(){0===o?o=s.length-1:o--,a.visible=!1,s[o].visible=!0,a=s[o]},this._onCredits=function(){new CCreditsPanel},this.refreshButtonPos=function(e,t){S.setPosition(i+e,n+t)},this.show=function(){o=0,a.visible=!1,s[o].visible=!0,a=s[o],h.visible=!0},this.hide=function(){h.visible=!1},this.resetHighlightCombo=function(){for(var e=0;e<c.length;e++)if(void 0!==c[e])for(var t=0;t<c[e].length;t++)c[e][t].color="#ffffff",u[e][t].setColor("#ffff00"),createjs.Tween.removeTweens(u[e][t].getText()),u[e][t].setAlpha(1)},this.highlightCombo=function(e,t){u[e-1][NUM_REELS-t].setColor("#ff9000"),this.tweenAlpha(u[e-1][NUM_REELS-t].getText(),0)},this.tweenAlpha=function(e,t){createjs.Tween.get(e,{loop:-1}).to({alpha:0},200).to({alpha:1},200)},this._onExit=function(){s_oGame.hidePayTable()},this.isVisible=function(){return h.visible},this._init()}function CStaticSymbolCell(e,t,i,n){var s,a,r,l,_,o,c,u,h,S,d=-1,p=(this._init=function(e,t,i,n){for(r=i,l=n,s=0,(S=new createjs.Container).visible=!1,s_oAttachSection.addChild(S),(h=new createjs.Container).visible=!1,h.x=i,h.y=n,S.addChild(h),_=[],e=0;e<NUM_SYMBOLS;e++)(t=createSprite(s_aSymbolAnims[e],"static",0,0,SYMBOL_ANIM_WIDTH,SYMBOL_ANIM_HEIGHT)).stop(),t.on("animationend",this._onAnimEnded,null,!1),h.addChild(t),_[e]=t,_[e].visible=!1;e=s_oSpriteLibrary.getSprite("amount_win_bg"),(u=createBitmap(e)).regX=e.width/2,u.regY=e.height/2,u.x=SYMBOL_ANIM_WIDTH/2,u.y=SYMBOL_ANIM_HEIGHT,h.addChild(u),(c=new CTLText(h,SYMBOL_ANIM_WIDTH/2-e.width/2,SYMBOL_ANIM_HEIGHT-22,e.width,48,48,"center","#ffd102",FONT_GAME_1,1,0,0," ",!0,!0,!1,!1)).setShadow("#000",2,2,2),e={framerate:20,images:[s_oSpriteLibrary.getSprite("win_frame_anim")],frames:{width:SYMBOL_WIDTH,height:SYMBOL_HEIGHT},animations:{static:[0],anim:[1,19]}},e=new createjs.SpriteSheet(e),(o=new createjs.Sprite(e,"static",0,0,SYMBOL_WIDTH,SYMBOL_HEIGHT)).stop(),o.x=i,o.y=n,S.addChild(o)},this.unload=function(){s_oAttachSection.removeChild(S)},this.hide=function(){var e;-1<d&&(stopSound(9===(e=d+1)||10===e||11===e?"symbol9_10_11":"symbol"+e),o.gotoAndStop("static"),o.visible=!1,u.visible=!1,c.refreshText(""),_[d].gotoAndPlay("static"),_[d].visible=!1,S.visible=!1,d=-1)},this.show=function(e,t,i,n,o){for(a=o,o=s=0;o<NUM_SYMBOLS;o++)_[o].visible=o+1===e;u.visible=!1,0<t&&(c.refreshText("x"+t),u.visible=!0),_[e-1].gotoAndPlay("anim"),_[d=e-1].spriteSheet.getNumFrames(),h.regX=n.x,h.regY=n.y,h.x=r+i.x,h.y=l+i.y,h.scaleX=h.scaleY=.5,h.visible=!0,h.alpha=1,S.visible=!0,createjs.Tween.get(h).to({scaleX:1,scaleY:1},1500,createjs.Ease.cubicOut),playSound(9===e||10===e||11===e?"symbol9_10_11":"symbol"+e,1,!1)},this.showWinFrame=function(){o.gotoAndPlay("anim"),o.visible=!0,S.visible=!0},this.hideWinFrame=function(){o.gotoAndPlay("static"),o.visible=!1,S.visible=!1},this._onAnimEnded=function(){++s===a&&-1<d&&(_[d].stop(),createjs.Tween.get(h).to({scaleX:.52,scaleY:.52,alpha:0},500,createjs.Ease.cubicOut).call(function(){p.stopAnim(),s_oGame.showWin()}))},this.stopAnim=function(){var e=d+1;stopSound(9===e||10===e||11===e?"symbol9_10_11":"symbol"+e),_[d].visible=!1,h.visible=!1,o.gotoAndStop("static"),o.visible=!1},this);this._init(e,t,i,n)}function CTweenController(){this.tweenValue=function(e,t,i){return e+i*(t-e)},this.easeLinear=function(e,t,i,n){return i*e/n+t},this.easeInCubic=function(e,t,i,n){return t+i*(n=(e/=n)*e*e)},this.easeBackInQuart=function(e,t,i,n){return t+i*(2*(n=(e/=n)*e)*n+2*n*e+-3*n)},this.easeInBack=function(e,t,i,n){return i*(e/=n)*e*(2.70158*e-1.70158)+t},this.easeOutCubic=function(e,t,i,n){return i*((e=e/n-1)*e*e+1)+t},this.getTrajectoryPoint=function(e,t){var i=new createjs.Point,n=(1-e)*(1-e),o=e*e;return i.x=n*t.start.x+2*(1-e)*e*t.traj.x+o*t.end.x,i.y=n*t.start.y+2*(1-e)*e*t.traj.y+o*t.end.y,i}}function CMsgBox(){var e,t,i;return this._init=function(){(i=new createjs.Container).visible=!1,s_oStage.addChild(i),e=createBitmap(s_oSpriteLibrary.getSprite("msg_box")),i.addChild(e),t=new CTLText(i,CANVAS_WIDTH/2-220,CANVAS_HEIGHT/2-50,440,120,30,"center","#fff",FONT_GAME_1,1,0,0," ",!0,!0,!0,!1),new CGfxButton(CANVAS_WIDTH/2+210,CANVAS_HEIGHT/2-110,s_oSpriteLibrary.getSprite("but_exit_info"),i).addEventListener(ON_MOUSE_UP,this._onExit,this)},this.show=function(e){t.refreshText(e),i.visible=!0},this.hide=function(){i.visible=!1},this._onExit=function(){this.hide()},this._init(),this}function CBonusPanel(){var t,i,n,o,s,a,r,l,_,c,u,h,S,d,p,f,b,E,m,g,e,T,w,O,A,N=!1,y=!1;this._init=function(){N=!(t=!1),i=-1,A.removeAllChildren();var e=createBitmap(s_oSpriteLibrary.getSprite("bg_bonus"));A.addChild(e),e=s_oSpriteLibrary.getSprite("ball_shadow"),(b=createBitmap(e)).x=CANVAS_WIDTH/2-100,b.y=CANVAS_HEIGHT-330,A.addChild(b),E=new CBonusBall(CANVAS_WIDTH/2,538,A),e=s_oSpriteLibrary.getSprite("but_goal"),(u=new CGfxButton(425,155,e,A)).addEventListenerWithParams(ON_MOUSE_UP,this._onShot,this,BONUS_BUTTON_1),(h=new CGfxButton(495,235,e,A)).addEventListenerWithParams(ON_MOUSE_UP,this._onShot,this,BONUS_BUTTON_2),(S=new CGfxButton(565,315,e,A)).addEventListenerWithParams(ON_MOUSE_UP,this._onShot,this,BONUS_BUTTON_3),(d=new CGfxButton(1080,155,e,A)).addEventListenerWithParams(ON_MOUSE_UP,this._onShot,this,BONUS_BUTTON_4),(p=new CGfxButton(1010,235,e,A)).addEventListenerWithParams(ON_MOUSE_UP,this._onShot,this,BONUS_BUTTON_5),(f=new CGfxButton(940,315,e,A)).addEventListenerWithParams(ON_MOUSE_UP,this._onShot,this,BONUS_BUTTON_6),m=new CBonusGoalkeeper(A),g=new CBonusPlayer(646,0,A),this._startBonus()},this._loadAllResources=function(){(A=new createjs.Container).on("click",function(){}),s_oAttachSection.addChild(A);var e=s_oSpriteLibrary.getSprite("bg_loading_bonus");for(T=createBitmap(e),A.addChild(T),e=s_oSpriteLibrary.getSprite("progress_bar"),(O=createBitmap(e)).x=CANVAS_WIDTH/2-e.width/2,O.y=CANVAS_HEIGHT-170,A.addChild(O),a=e.width,r=e.height,(c=new createjs.Shape).graphics.beginFill("rgba(255,255,255,0.01)").drawRect(O.x,O.y,1,r),A.addChild(c),O.mask=c,(w=new createjs.Text("","30px "+FONT_GAME_1,"#fff")).x=CANVAS_WIDTH/2,w.y=CANVAS_HEIGHT-125,w.shadow=new createjs.Shadow("#000",2,2,2),w.textBaseline="alphabetic",w.textAlign="center",A.addChild(w),s_oSpriteLibrary.init(this._onResourceBonusLoaded,this._onAllImagesLoaded,this),s_oSpriteLibrary.addSprite("bg_bonus","./sprites/bonus/bg_bonus.jpg"),s_oSpriteLibrary.addSprite("ball_shadow","./sprites/bonus/ball_shadow.png"),s_oSpriteLibrary.addSprite("but_goal","./sprites/bonus/but_goal.png"),s_oSpriteLibrary.addSprite("ball_anim","./sprites/bonus/ball_anim.png"),s_oSpriteLibrary.addSprite("bonus_panel_bg","./sprites/bonus/bonus_panel_bg.png"),e=0;e<23;e++)s_oSpriteLibrary.addSprite("gk_idle_"+e,"./sprites/bonus/goalkeeper_idle/gk_idle_"+e+".png");for(e=0;e<33;e++)s_oSpriteLibrary.addSprite("gk_save_left_"+e,"./sprites/bonus/goalkeeper_save_left/gk_save_left_"+e+".png"),s_oSpriteLibrary.addSprite("gk_save_right_"+e,"./sprites/bonus/goalkeeper_save_right/gk_save_right_"+e+".png");for(e=0;e<30;e++)s_oSpriteLibrary.addSprite("player_"+e,"./sprites/bonus/player/player_"+e+".png");l=0,_=s_oSpriteLibrary.getNumSprites(),s_oSpriteLibrary.loadSprites(),y=!0},this._onResourceBonusLoaded=function(){l++;var e=Math.floor(l/_*100);w.text=e+"%",c.graphics.clear(),e=Math.floor(e*a/100),c.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(O.x,O.y,e,r),l===_&&this._init()},this._onAllImagesLoaded=function(){},this.show=function(e){n=e,N?this._startBonus():this._loadAllResources(),$(s_oMain).trigger("bonus_start")},this.hide=function(){t=!1,A.off("click",function(){}),A.visible=!1,e.unload(),this._enableAllButtons(),y=!1},this._startBonus=function(){b.visible=!0,m.show(),A.on("click",function(){}),t=A.visible=!0,i=STATE_BONUS_IDLE},this._enableAllButtons=function(){h.setVisible(!0),p.setVisible(!0),S.setVisible(!0),f.setVisible(!0),u.setVisible(!0),d.setVisible(!0)},this._disableAllButtons=function(){h.setVisible(!1),p.setVisible(!1),S.setVisible(!1),f.setVisible(!1),u.setVisible(!1),d.setVisible(!1)},this._onShot=function(e){switch(s_oBonusPanel._disableAllButtons(),e){case BONUS_BUTTON_1:o=u.getX(),s=u.getY();break;case BONUS_BUTTON_2:o=h.getX(),s=h.getY();break;case BONUS_BUTTON_3:o=S.getX(),s=S.getY();break;case BONUS_BUTTON_4:o=d.getX(),s=d.getY();break;case BONUS_BUTTON_5:o=p.getX(),s=p.getY();break;case BONUS_BUTTON_6:o=f.getX(),s=f.getY()}i=STATE_BONUS_KICK,g.show()},this.kick=function(){playSound("kick",1,!1),b.visible=!1,E.show(o,s),m.dive(Math.round(Math.random()+1))},this.ballArrived=function(){i=STATE_BONUS_WIN,new CScoreText(n,o,s),setTimeout(function(){e=new CBonusResultPanel(n,A)},2e3)},this.unload=function(){this.hide(),s_oGame.exitFromBonus()},this.isVisible=function(){return y},this.update=function(){if(t)switch(i){case STATE_BONUS_IDLE:m.update();break;case STATE_BONUS_KICK:m.update(),g.update(),E.update()}},s_oBonusPanel=this}var s_oBonusPanel=null,s_aSession=[],NUM_ROWS=3,NUM_REELS=5,_aFinalSymbols=[],_aPaylineCombo=[],_aPaylineCombo=_initPaylines(),_aSymbolWin=[],_iNumSymbolFreeSpin=0;function _initSettings(){s_aSession.iMoney=TOTAL_MONEY,s_aSession.iSlotCash=SLOT_CASH,s_aSession.win_occurrence=WIN_OCCURRENCE,s_aSession.freespin_occurrence=FREESPIN_OCCURRENCE,s_aSession.bonus_occurrence=BONUS_OCCURRENCE,s_aSession.freespin_symbol_num_occur=FREESPIN_SYMBOL_NUM_OCCURR,s_aSession.num_freespin=NUM_FREESPIN,s_aSession.bonus_prize=BONUS_PRIZE,s_aSession.bonus_prize_occur=BONUS_PRIZE_OCCURR,s_aSession.coin_bet=COIN_BET,_aSymbolWin=_initSymbolWin()}function checkLogin(){return s_aSession.iTotFreeSpin=0,s_aSession.bFreeSpin=0,_initSettings(),_setMinWin(),_tryToCheckLogin()}function callSpin(e,t,i){return _onSpin(e,t,i)}function _tryToCheckLogin(){for(var e=[],t=0;t<_aSymbolWin.length;t++)e[t]=_aSymbolWin[t].join(",");return"res=true&login=true&money="+s_aSession.iMoney+"&bonus_prize="+s_aSession.bonus_prize.join("#")+"&paytable="+e.join("#")+"&coin_bet="+s_aSession.coin_bet.join("#")}function _setMinWin(){s_aSession.min_win=9999999999999;for(var e=0;e<_aSymbolWin.length;e++)for(var t=_aSymbolWin[e],i=0;i<t.length;i++)0!==t[i]&&t[i]<s_aSession.min_win&&(s_aSession.min_win=t[i])}function _onSpin(e,t,i){if(!(i>s_aSession.iMoney)){s_aSession.iMoney-=i,s_aSession.iSlotCash+=i;var n=s_aSession.bBonus=0,o=0;if(s_aSession.iSlotCash<s_aSession.min_win*t)return generLosingPattern(),1===s_aSession.bFreeSpin&&(--s_aSession.iTotFreeSpin,s_aSession.iTotFreeSpin<0)&&(s_aSession.iTotFreeSpin=0,s_aSession.bFreeSpin=0),$(s_oMain).trigger("bet_placed",{bet:t,tot_bet:i,payline:e,amount_win:0}),"res=true&win=false&pattern="+JSON.stringify(_aFinalSymbols)+"&money="+s_aSession.iMoney+"&freespin=0&num_freespin="+s_aSession.iTotFreeSpin+"&bonus=false&bonus_prize=-1&cash="+s_aSession.iSlotCash;if(Math.floor(100*Math.random())<s_aSession.win_occurrence){0===s_aSession.bFreeSpin&&0===s_aSession.bBonus&&(s=Math.floor(100*Math.random()),0===s_aSession.iTotFreeSpin)&&s<s_aSession.freespin_occurrence+s_aSession.bonus_occurrence&&((s=Math.floor(Math.random()*(s_aSession.freespin_occurrence+s_aSession.bonus_occurrence)+1))<=s_aSession.freespin_occurrence?n=1:o=s_aSession.iSlotCash>=s_aSession.bonus_prize[0]*t?1:0);do{generateRandomSymbols(n,o);for(var s=checkWin(n,o,e),a=0,r=0;r<s.length;r++)a+=s[r].amount;a*=t;var l=0;if(r=-1,1===o){for(s_aSession.bBonus=1,r=[],l=0;l<s_aSession.bonus_prize_occur.length;l++)for(var _=s_aSession.bonus_prize_occur[l],c=0;c<_;c++)r.push(l);r=r[Math.floor(Math.random()*r.length)],l=s_aSession.bonus_prize[r]*t}}while(0===s.length||l+a>s_aSession.iSlotCash||l+a<i);return s_aSession.iMoney=s_aSession.iMoney+a+l,s_aSession.iSlotCash=s_aSession.iSlotCash-a-l,1===n&&2<_iNumSymbolFreeSpin?(s_aSession.bFreeSpin=1,s_aSession.iTotFreeSpin=s_aSession.num_freespin[_iNumSymbolFreeSpin-3]):1===s_aSession.bFreeSpin&&(--s_aSession.iTotFreeSpin,s_aSession.iTotFreeSpin<0)&&(s_aSession.iTotFreeSpin=0,s_aSession.bFreeSpin=0),o=a+l,$(s_oMain).trigger("bet_placed",{bet:t,tot_bet:i,payline:e,amount_win:o}),"res=true&win=true&pattern="+JSON.stringify(_aFinalSymbols)+"&win_lines="+JSON.stringify(s)+"&money="+s_aSession.iMoney+"&tot_win="+a+"&freespin="+n+"&num_freespin="+s_aSession.iTotFreeSpin+"&bonus="+s_aSession.bBonus+"&bonus_prize="+r+"&cash="+s_aSession.iSlotCash}return generLosingPattern(),1===s_aSession.bFreeSpin&&(--s_aSession.iTotFreeSpin,s_aSession.iTotFreeSpin<0)&&(s_aSession.iTotFreeSpin=0,s_aSession.bFreeSpin=0),$(s_oMain).trigger("bet_placed",{bet:t,tot_bet:i,payline:e,amount_win:0}),"res=true&win=false&pattern="+JSON.stringify(_aFinalSymbols)+"&money="+s_aSession.iMoney+"&freespin=0&num_freespin="+s_aSession.iTotFreeSpin+"&bonus=false&bonus_prize=-1"}_dieError("INVALID BET: "+i+",money:"+s_aSession.iMoney)}function _initPaylines(){return _aPaylineCombo[0]=[{row:1,col:0},{row:1,col:1},{row:1,col:2},{row:1,col:3},{row:1,col:4}],_aPaylineCombo[1]=[{row:0,col:0},{row:0,col:1},{row:0,col:2},{row:0,col:3},{row:0,col:4}],_aPaylineCombo[2]=[{row:2,col:0},{row:2,col:1},{row:2,col:2},{row:2,col:3},{row:2,col:4}],_aPaylineCombo[3]=[{row:0,col:0},{row:1,col:1},{row:2,col:2},{row:1,col:3},{row:0,col:4}],_aPaylineCombo[4]=[{row:2,col:0},{row:1,col:1},{row:0,col:2},{row:1,col:3},{row:2,col:4}],_aPaylineCombo[5]=[{row:1,col:0},{row:1,col:1},{row:2,col:2},{row:1,col:3},{row:1,col:4}],_aPaylineCombo[6]=[{row:1,col:0},{row:1,col:1},{row:0,col:2},{row:1,col:3},{row:1,col:4}],_aPaylineCombo[7]=[{row:2,col:0},{row:1,col:1},{row:1,col:2},{row:1,col:3},{row:2,col:4}],_aPaylineCombo[8]=[{row:0,col:0},{row:1,col:1},{row:1,col:2},{row:1,col:3},{row:0,col:4}],_aPaylineCombo[9]=[{row:1,col:0},{row:0,col:1},{row:1,col:2},{row:0,col:3},{row:1,col:4}],_aPaylineCombo[10]=[{row:1,col:0},{row:2,col:1},{row:1,col:2},{row:2,col:3},{row:1,col:4}],_aPaylineCombo[11]=[{row:0,col:0},{row:1,col:1},{row:0,col:2},{row:1,col:3},{row:0,col:4}],_aPaylineCombo[12]=[{row:2,col:0},{row:1,col:1},{row:2,col:2},{row:1,col:3},{row:2,col:4}],_aPaylineCombo[13]=[{row:0,col:0},{row:0,col:1},{row:1,col:2},{row:0,col:3},{row:0,col:4}],_aPaylineCombo[14]=[{row:2,col:0},{row:2,col:1},{row:1,col:2},{row:2,col:3},{row:2,col:4}],_aPaylineCombo[15]=[{row:2,col:0},{row:2,col:1},{row:1,col:2},{row:0,col:3},{row:0,col:4}],_aPaylineCombo[16]=[{row:0,col:0},{row:0,col:1},{row:1,col:2},{row:2,col:3},{row:2,col:4}],_aPaylineCombo[17]=[{row:0,col:0},{row:0,col:1},{row:2,col:2},{row:0,col:3},{row:0,col:4}],_aPaylineCombo[18]=[{row:2,col:0},{row:2,col:1},{row:0,col:2},{row:2,col:3},{row:2,col:4}],_aPaylineCombo[19]=[{row:0,col:0},{row:2,col:1},{row:2,col:2},{row:2,col:3},{row:0,col:4}],_aPaylineCombo}function _initSymbolWin(){return _aSymbolWin[0]=[0,0,0,0,0],_aSymbolWin[1]=PAYTABLE_VALUES[1],_aSymbolWin[2]=PAYTABLE_VALUES[2],_aSymbolWin[3]=PAYTABLE_VALUES[3],_aSymbolWin[4]=PAYTABLE_VALUES[4],_aSymbolWin[5]=PAYTABLE_VALUES[5],_aSymbolWin[6]=PAYTABLE_VALUES[6],_aSymbolWin[7]=PAYTABLE_VALUES[7],_aSymbolWin[8]=PAYTABLE_VALUES[8],_aSymbolWin[9]=PAYTABLE_VALUES[9],_aSymbolWin[10]=PAYTABLE_VALUES[10],_aSymbolWin[11]=[0,0,0,0,0],_aSymbolWin[12]=[0,0,0,0,0],_aSymbolWin}function generLosingPattern(){for(var e=[],t=0;t<NUM_ROWS;t++){do{var i=Math.floor(Math.random()*s_aRandSymbols.length)}while(s_aRandSymbols[i]===BONUS_SYMBOL||s_aRandSymbols[i]===FREESPIN_SYMBOL||s_aRandSymbols[i]===WILD_SYMBOL);i=s_aRandSymbols[i],e[t]=i}for(t=0;t<NUM_ROWS;t++){_aFinalSymbols[t]=[];for(var n=0;n<NUM_REELS;n++)if(0==n)_aFinalSymbols[t][n]=e[t];else{for(;i=Math.floor(Math.random()*s_aRandSymbols.length),i=s_aRandSymbols[i],e[0]===i||e[1]===i||e[2]===i||i===BONUS_SYMBOL||i===FREESPIN_SYMBOL||i===WILD_SYMBOL;);_aFinalSymbols[t][n]=i}}}function generateRandomSymbols(e,t){for(var i=0;i<NUM_ROWS;i++){_aFinalSymbols[i]=[];for(var n=0;n<NUM_REELS;n++)for(;iRandSymbol=s_aRandSymbols[Math.floor(Math.random()*s_aRandSymbols.length)],(_aFinalSymbols[i][n]=iRandSymbol)===BONUS_SYMBOL||iRandSymbol===FREESPIN_SYMBOL;);}if(1===e){for(var o=[],i=0;i<s_aSession.freespin_symbol_num_occur.length;i++)for(n=0;n<s_aSession.freespin_symbol_num_occur[i];n++)o.push(i);for(_iNumSymbolFreeSpin=3+o[Math.floor(Math.random()*o.length)],i=shuffle(i=[0,1,2,3,4]),n=0;n<_iNumSymbolFreeSpin;n++)o=Math.floor(3*Math.random()),_aFinalSymbols[o][i[n]]=FREESPIN_SYMBOL}else if(1===t){i=shuffle(i=[0,1,2,3,4]);for(var s=Math.floor(3*Math.random()+3),n=0;n<s;n++)o=Math.floor(3*Math.random()),_aFinalSymbols[o][i[n]]=BONUS_SYMBOL}}function checkWin(e,t,i){for(var n=[],o=0;o<i;o++){var s=_aPaylineCombo[o],a=[],r=_aFinalSymbols[s[0].row][s[0].col],l=1,_=1;for(a.push({row:s[0].row,col:s[0].col,value:_aFinalSymbols[s[0].row][s[0].col]});r===WILD_SYMBOL&&_<NUM_REELS;)l++,r=_aFinalSymbols[s[_].row][s[_].col],a.push({row:s[_].row,col:s[_].col,value:_aFinalSymbols[s[_].row][s[_].col]}),_++;for(;_<s.length&&(_aFinalSymbols[s[_].row][s[_].col]===r||_aFinalSymbols[s[_].row][s[_].col]===WILD_SYMBOL);_++)l++,a.push({row:s[_].row,col:s[_].col,value:_aFinalSymbols[s[_].row][s[_].col]});!(0<_aSymbolWin[r-1][l-1])||1===e&&r===FREESPIN_SYMBOL||1===t&&r===BONUS_SYMBOL||(a.sort(sortListByCol),n.push({line:o+1,amount:_aSymbolWin[r-1][l-1],num_win:l,value:r,list:a}))}if(1===e){for(a=[],e=0;e<NUM_ROWS;e++)for(t=0;t<NUM_REELS;t++)_aFinalSymbols[e][t]===FREESPIN_SYMBOL&&a.push({row:e,col:t,value:FREESPIN_SYMBOL});a.sort(sortListByCol),n.push({line:0,amount:0,num_win:a.length,value:FREESPIN_SYMBOL,list:a})}else if(1===t){for(a=[],e=0;e<NUM_ROWS;e++)for(t=0;t<NUM_REELS;t++)_aFinalSymbols[e][t]===BONUS_SYMBOL&&a.push({row:e,col:t,value:BONUS_SYMBOL});a.sort(sortListByCol),n.push({line:0,amount:0,num_win:a.length,value:BONUS_SYMBOL,list:a})}return n}function shuffle(e){for(var t,i,n=e.length;n;t=Math.floor(Math.random()*n),i=e[--n],e[n]=e[t],e[t]=i);return e}function sortListByCol(e,t){return e.col<t.col?-1:e.col>t.col?1:0}function _dieError(e){return"res=false&desc="+e}function CSpinBut(e,t,i,n,o,s){var a,r,l,_,c,u,h,S=!1,d=!1,p=(this._init=function(e,t,i,n,o){_=[],c=[],(u=new createjs.Container).x=e,u.y=t,u.regX=Math.floor(n/2),u.regY=Math.floor(o/2),u.cursor="pointer",p.addChild(u),e=new createjs.SpriteSheet({framerate:1,images:[i],frames:{width:n,height:o},animations:{spin:[0],stop:[1],autospin:[2],skip:[3],freespin:[4],disable:[5]}}),(h=createSprite(e,"spin",0,0,n,o)).stop(),u.addChild(h),a=o,l=SPIN_BUT_STATE_SPIN,this._initListener()},this.enable=function(){S=!1,h.gotoAndStop(l)},this.disable=function(){S=!0},this.setState=function(e){h.gotoAndStop(e),e!==SPIN_BUT_STATE_STOP&&(l=e)},this.toggleAutoSpinImage=function(){h.currentAnimation===SPIN_BUT_STATE_SPIN?h.gotoAndStop(SPIN_BUT_STATE_AUTOSPIN):h.gotoAndStop(SPIN_BUT_STATE_SPIN)},this._initListener=function(){u.on("mousedown",this.buttonDown),u.on("pressup",this.buttonRelease)},this.unload=function(){u.off("mousedown",this.buttonDown),u.off("pressup",this.buttonRelease),p.removeChild(u)},this.setVisible=function(e){u.visible=e},this.addEventListener=function(e,t,i){_[e]=t,c[e]=i},this.buttonRelease=function(){!1===d||S||(d=!1,_[ON_MOUSE_UP]&&_[ON_MOUSE_UP].call(c[ON_MOUSE_UP],h.currentAnimation))},this.buttonDown=function(){S||(d=!(r=0),_[ON_MOUSE_DOWN]&&_[ON_MOUSE_DOWN].call(c[ON_MOUSE_DOWN]))},this.setPosition=function(e,t){u.x=e,u.y=t},this.setX=function(e){u.x=e},this.setY=function(e){u.y=e},this.getButtonImage=function(){return u},this.getX=function(){return u.x},this.getY=function(){return u.y},this.getHeight=function(){return a},this.getSprite=function(){return u},this.getState=function(){return h.currentAnimation},this.update=function(){!1!==d&&TIME_HOLD_AUTOSPIN<(r+=s_iTimeElaps)&&(r=0,d=!1,_[ON_MOUSE_UP])&&_[ON_MOUSE_UP].call(c[ON_MOUSE_UP],h.currentAnimation,!0)},s);return this._init(e,t,i,n,o),this}function CBonusGoalkeeper(e){var t,i,n,o,s,a,r,l,_,c,u=!1,h=(this._init=function(){r=new createjs.Container,h.addChild(r),(l=new createjs.Container).x=650,l.y=160,r.addChild(l),(_=new createjs.Container).visible=!1,_.x=292,_.y=132,r.addChild(_),(c=new createjs.Container).visible=!1,c.x=662,c.y=132,r.addChild(c),a=[[],[],[]];for(var e=0;e<23;e++){var t=createBitmap(s_oSpriteLibrary.getSprite("gk_idle_"+e));l.addChild(t),a[0].push(t),0<e&&(t.visible=!1)}for(e=0;e<33;e++){t=createBitmap(s_oSpriteLibrary.getSprite("gk_save_left_"+e)),_.addChild(t),a[1].push(t);var i=createBitmap(s_oSpriteLibrary.getSprite("gk_save_right_"+e));c.addChild(i),a[2].push(i),0<e&&(t.visible=!1,i.visible=!1)}},this.show=function(){o=t=0,s=2,i=23,l.visible=!0,_.visible=!1,c.visible=!1,r.visible=!0,a[t][0].visible=!0,u=!(n=0)},this.dive=function(e){switch(o=0,i=33,t=e){case s=1:l.visible=!1,_.visible=!0,c.visible=!1;break;case 2:l.visible=!1,_.visible=!1,c.visible=!0}a[t][0].visible=!0,n=0,this.resetIdleAnim(),u=!0},this.resetIdleAnim=function(){for(var e=0;e<a[0].length;e++)a[0][e].visible=!1},this._showWinAnim=function(){r.visible=!1,l.visible=!0,_.visible=!1,u=c.visible=!1},this.playToFrame=function(e){a[t][n].visible=!1,n=e,a[t][n].visible=!0},this.nextFrame=function(){a[t][n].visible=!1,n++,a[t][n].visible=!0},this.update=function(){!1!==u&&++o===s&&(o=0,n===i-1?0===t?this.playToFrame(1):(a[t][n].visible=!1,this._showWinAnim()):this.nextFrame())},e);this._init()}function CBonusPlayer(e,t,i){var n,o,s,a,r=!1,l=(this._init=function(e,t){(a=new createjs.Container).visible=!1,a.x=e,a.y=t,l.addChild(a),s=[];for(var i=0;i<30;i++){var n=createBitmap(s_oSpriteLibrary.getSprite("player_"+i));a.addChild(n),s.push(n),0<i&&(n.visible=!1)}},this.show=function(){n=30,s[0].visible=!0,o=0,r=a.visible=!0},this.hide=function(){a.visible=!1},this.playToFrame=function(e){s[o].visible=!1,s[o=e].visible=!0},this.nextFrame=function(){s[o].visible=!1,s[++o].visible=!0},this.update=function(){!1!==r&&(o===n-1?(r=!1,this.hide()):(this.nextFrame(),9===o&&s_oBonusPanel.kick()))},i);this._init(e,t)}function CBonusBall(e,t,i){var n,o,s,a,r,l,_,c,u,h,S=!1,d=(this._init=function(e,t){n=e,o=t,a=1,r=FPS/2;e=s_oSpriteLibrary.getSprite("ball_anim"),t=new createjs.SpriteSheet({images:[e],frames:{width:211,height:205,regX:105,regY:102},animations:{static:[0],moving:[1,29,"moving"]}});(h=createSprite(t,"static",0,0,e.width/2,e.height)).visible=!1,h.x=n,h.y=o,h.stop(),d.addChild(h),u=new CTweenController},this.show=function(e,t){l=e,_=t,h.x=n,h.y=o,this._calculateMid(new createjs.Point(h.x,h.y),new createjs.Point(l,_)),h.scaleX=h.scaleY=1,h.alpha=1,h.visible=!0,h.gotoAndPlay("moving"),S=!(s=0)},this.hide=function(){h.visible=!1},this._resetBall=function(){playSound("avatar_win",1,!1),s=0,h.gotoAndStop("static"),S=!1,createjs.Tween.get(h).to({y:CANVAS_HEIGHT/2},1500,createjs.Ease.cubicIn),createjs.Tween.get(h).to({alpha:0},1e3,createjs.Ease.cubicIn).call(function(){s_oBonusPanel.ballArrived()})},this._calculateMid=function(e,t){var i=t.x<CANVAS_WIDTH/2?new createjs.Point(t.x-100,t.y+40):new createjs.Point(t.x+100,t.y+40);c={start:e,end:t,traj:i}},this.getX=function(){return h.x},this.getY=function(){return h.y},this.update=function(){var e;S&&(r<(s+=a)?this._resetBall():(e=u.easeOutCubic(s,0,1,r),e=u.getTrajectoryPoint(e,c),h.x=e.x,h.y=e.y,.2<=h.scaleX&&(h.scaleX-=.06,h.scaleY-=.06)))},i);this._init(e,t)}function CScoreText(e,t,i){var o;this._init=function(e,t,i){(o=new createjs.Text("00000"," 60px "+FONT_GAME_1,"#ffd202")).textAlign="center",o.text="X"+e,o.x=t,o.y=i,o.alpha=0,o.shadow=new createjs.Shadow("#000",1,1,1),s_oStage.addChild(o);var n=this;createjs.Tween.get(o).to({alpha:1},200,createjs.Ease.quadIn).call(function(){n.moveUp()})},this.moveUp=function(){var e=o.y-100,t=this;createjs.Tween.get(o).to({y:e},1500,createjs.Ease.sineIn).call(function(){t.unload()}),createjs.Tween.get(o).wait(800).to({alpha:0},500)},this.unload=function(){s_oStage.removeChild(o)},this._init(e,t,i)}function CBonusResultPanel(e,t){this._init=function(e){(n=new createjs.Shape).graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT),n.alpha=0,s.addChild(n),(o=new createjs.Container).x=-CANVAS_WIDTH/2,o.y=CANVAS_HEIGHT/2,s.addChild(o);var t=s_oSpriteLibrary.getSprite("bonus_panel_bg"),i=createBitmap(t);i.regX=t.width/2,i.regY=t.height/2,o.addChild(i),new CTLText(o,-240,-110,480,52,52,"center","#fff",FONT_GAME_1,1,0,0,TEXT_CONGRATS,!0,!0,!1,!1).setShadow("#000",1,1,1),new CTLText(o,-240,10,480,100,50,"center","#fff",FONT_GAME_1,1,0,0,TEXT_YOU_WIN+"\nX"+e,!0,!0,!0,!1).setShadow("#000",1,1,1),createjs.Tween.get(o).to({x:CANVAS_WIDTH/2},1e3,createjs.Ease.cubicOut).call(function(){createjs.Tween.get(n).to({alpha:.6},400)}).call(function(){setTimeout(function(){s_oBonusPanel.unload()},2e3)}),playSound("bonus_win",1,!1)},this.unload=function(){s.removeChild(n),s.removeChild(o)};var n,o,s=t;this._init(e)}function CFreespinPanel(e){this._init=function(){(n=new createjs.Container).visible=!1,t.addChild(n);var e=createBitmap(s_oSpriteLibrary.getSprite("msg_box"));n.addChild(e),new CTLText(n,CANVAS_WIDTH/2-240,300,480,50,50,"center","#fff",FONT_GAME_1,1,0,0,TEXT_CONGRATS,!0,!0,!1,!1),i=new CTLText(n,CANVAS_WIDTH/2-240,420,480,50,50,"center","#fff",FONT_GAME_1,1,0,0," ",!0,!0,!1,!1)},this.show=function(e){i.refreshText(TEXT_YOU_WIN+" "+e+" "+TEXT_FREESPINS),n.on("click",function(){}),n.alpha=0,n.visible=!0;var t=this;createjs.Tween.get(n).to({alpha:1},800,createjs.Ease.cubicOut).call(function(){setTimeout(function(){t.hide()},3e3)}),playSound("bonus_win",1,!1)},this.hide=function(){n.off("click",function(){}),createjs.Tween.get(n).to({alpha:0},800,createjs.Ease.cubicOut).call(function(){n.visible=!1}),s_oGame.exitFromFreespinPanel()};var i,n,t=e;this._init()}function CAvatar(e){var i,t,n,o,s,a,r,l=!1,_=!1,c=2,u=0,h=0,S=(this._init=function(){i=50,(r=new createjs.Container).x=130,r.y=252,S.addChild(r),s=new createjs.Container,r.addChild(s),(a=new createjs.Container).visible=!1,r.addChild(a),o=[[],[]];for(var e=0;e<30;e++){var t=createBitmap(s_oSpriteLibrary.getSprite("avatar_idle_"+e));s.addChild(t),(o[0][e]=t).visible=!1}for(e=0;e<38;e++)t=createBitmap(s_oSpriteLibrary.getSprite("avatar_win_"+e)),a.addChild(t),(o[1][e]=t).visible=!1;this.refreshButtonPos(s_iOffsetX)},this._hideAllAnims=function(){for(var e=0;e<o[0].length;e++)o[0][e].visible=!1,o[1][e].visible=!1,o[2][e].visible=!1},this.refreshButtonPos=function(e,t){i+e<130&&(r.x=i+e)},this.show=function(e){switch(o[h][u].visible=!1,h=e){case 0:s.visible=!0,a.visible=!1;break;case 1:s.visible=!1,a.visible=!0}n=o[h].length,c=2,o[h][0].visible=!0,_=u=t=0,l=!0},this.playToFrame=function(e){o[h][u].visible=!1,u=e,o[h][u].visible=!0},this.nextFrame=function(){o[h][u].visible=!1,u++,o[h][u].visible=!0},this.update=function(){!1!==l&&++t===c&&(t=0,u===n-1?(this.playToFrame(1),2===++_&&1===h&&this.show(0)):this.nextFrame())},e);this._init()}function CCreditsPanel(){var i,n,o,s;this._init=function(){n=new createjs.Container,s_oStage.addChild(n);var e=createBitmap(e=s_oSpriteLibrary.getSprite("msg_box")),t=(n.addChild(e),(i=new createjs.Shape).graphics.beginFill("#0f0f0f").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT),i.alpha=.01,i.on("click",this._onLogoButRelease),n.addChild(i),(e=new createjs.Text("www.hahaha.com"," 34px "+FONT_GAME_1,"#000000")).x=CANVAS_WIDTH/2,e.y=500,e.textAlign="center",e.textBaseline="middle",e.lineWidth=300,e.outline=5,n.addChild(e),new createjs.Text("www.hahaha.com"," 34px "+FONT_GAME_1,"#ffffff"));t.x=CANVAS_WIDTH/2,t.y=e.y,t.textAlign="center",t.textBaseline="middle",t.lineWidth=300,n.addChild(t),e=s_oSpriteLibrary.getSprite("ctl_logo"),(s=createBitmap(e)).regX=e.width/2,s.regY=e.height/2,s.x=CANVAS_WIDTH/2,s.y=CANVAS_HEIGHT/2-40,n.addChild(s),e=s_oSpriteLibrary.getSprite("but_exit_info"),(o=new CGfxButton(970,264,e,n)).addEventListener(ON_MOUSE_UP,this.unload,this),n.alpha=0,createjs.Tween.get(n).to({alpha:1},1e3,createjs.Ease.cubicOut)},this.unload=function(){o.unload(),i.off("mousedown",this._onLogoButRelease),s_oStage.removeChild(n)},this._onLogoButRelease=function(){window.open("http://www.hahaha.com/index.php?&l=en")},this._init()}function CTLText(e,t,i,n,o,s,a,r,l,_,c,u,h,S,d,p,f){this._oContainer=e,this._x=t,this._y=i,this._iWidth=n,this._iHeight=o,this._bMultiline=p,this._iFontSize=s,this._szAlign=a,this._szColor=r,this._szFont=l,this._iPaddingH=c,this._iPaddingV=u,this._bVerticalAlign=d,this._bFitText=S,this._bDebug=f,this._oDebugShape=null,this._fLineHeightFactor=_,this._oText=null,h&&this.__createText(h)}function CRechargePanel(){var e,t,i,n,o,s=this;this._init=function(){(o=new createjs.Container).visible=!1,s_oStage.addChild(o),t=createBitmap(s_oSpriteLibrary.getSprite("msg_box")),e=t.on("click",function(){}),o.addChild(t),new CTLText(o,CANVAS_WIDTH/2-240,250,480,150,40,"center","#000",FONT_GAME_1,1,0,0,TEXT_NO_MONEY,!0,!0,!0,!1).setOutline(3),new CTLText(o,CANVAS_WIDTH/2-240,250,480,150,40,"center","#fff",FONT_GAME_1,1,0,0,TEXT_NO_MONEY,!0,!0,!0,!1),(n=new CTextButton(CANVAS_WIDTH/2-140,CANVAS_HEIGHT/2+100,s_oSpriteLibrary.getSprite("info_but"),TEXT_EXIT,FONT_GAME_1,"#fff",40,"center",0,o)).addEventListener(ON_MOUSE_UP,this._onExit,this),(i=new CTextButton(CANVAS_WIDTH/2+140,CANVAS_HEIGHT/2+100,s_oSpriteLibrary.getSprite("info_but"),TEXT_RECHARGE,FONT_GAME_1,"#fff",40,"center",0,o)).addEventListener(ON_MOUSE_UP,this._onRecharge,this)},this.unload=function(){t.off("click",e),n.unload(),n=null,i.unload(),s_oStage.removeChild(o)},this.show=function(){o.alpha=0,o.visible=!0,createjs.Tween.get(o).to({alpha:1},600,createjs.Ease.cubicOut)},this.hide=function(){o.visible=!1},this._onExit=function(){s.hide(),s_oInterface.enableGuiButtons()},this._onRecharge=function(){$(s_oMain).trigger("recharge"),s.hide()},this._init()}function extractHostname(e){return(e=(e=-1<e.indexOf("://")?e.split("/")[2]:e.split("/")[0]).split(":")[0]).split("?")[0]}function extractRootDomain(e){var t=(e=extractHostname(e)).split("."),i=t.length;return e=2<i?t[i-2]+"."+t[i-1]:e}s_aSession.bBonus=0,CTLText.prototype={constructor:CTLText,__autofit:function(){if(this._bFitText){for(var e=this._iFontSize;(this._oText.getBounds().height>this._iHeight-2*this._iPaddingV||this._oText.getBounds().width>this._iWidth-2*this._iPaddingH)&&(this._oText.font=--e+"px "+this._szFont,this._oText.lineHeight=Math.round(e*this._fLineHeightFactor),this.__updateY(),this.__verticalAlign(),!(e<8)););this._iFontSize=e}},__verticalAlign:function(){var e;this._bVerticalAlign&&(e=this._oText.getBounds().height,this._oText.y-=(e-this._iHeight)/2+this._iPaddingV)},__updateY:function(){this._oText.y=this._y+this._iPaddingV,"middle"===this._oText.textBaseline&&(this._oText.y+=this._oText.lineHeight/2+(this._iFontSize*this._fLineHeightFactor-this._iFontSize))},__createText:function(e){switch(this._bDebug&&(this._oDebugShape=new createjs.Shape,this._oDebugShape.graphics.beginFill("rgba(255,0,0,0.5)").drawRect(this._x,this._y,this._iWidth,this._iHeight),this._oContainer.addChild(this._oDebugShape)),this._oText=new createjs.Text(e,this._iFontSize+"px "+this._szFont,this._szColor),this._oText.textBaseline="middle",this._oText.lineHeight=Math.round(this._iFontSize*this._fLineHeightFactor),this._oText.textAlign=this._szAlign,this._oText.lineWidth=this._bMultiline?this._iWidth-2*this._iPaddingH:null,this._szAlign){case"center":this._oText.x=this._x+this._iWidth/2;break;case"left":this._oText.x=this._x+this._iPaddingH;break;case"right":this._oText.x=this._x+this._iWidth-this._iPaddingH}this._oContainer.addChild(this._oText),this.refreshText(e)},setVerticalAlign:function(e){this._bVerticalAlign=e},setOutline:function(e){null!==this._oText&&(this._oText.outline=e)},setShadow:function(e,t,i,n){null!==this._oText&&(this._oText.shadow=new createjs.Shadow(e,t,i,n))},setColor:function(e){this._oText.color=e},setAlpha:function(e){this._oText.alpha=e},setY:function(e){this._y=this._oText.y=e},removeTweens:function(){createjs.Tween.removeTweens(this._oText)},getText:function(){return this._oText},getString:function(){return this._oText.text},getX:function(){return this._x},getY:function(){return this._y},getFontSize:function(){return this._iFontSize},refreshText:function(e){""===e&&(e=" "),null===this._oText&&this.__createText(e),this._oText.text=e,this._oText.font=this._iFontSize+"px "+this._szFont,this._oText.lineHeight=Math.round(this._iFontSize*this._fLineHeightFactor),this.__autofit(),this.__updateY(),this.__verticalAlign()}};var getClosestTop=function(){var e=window,t=!1;try{for(;e.parent.document!==e.document;){if(!e.parent.document){t=!0;break}e=e.parent}}catch(e){t=!0}return{topFrame:e,err:t}},getBestPageUrl=function(e){var t=e.topFrame,i="";if(e.err)try{try{i=window.top.location.href}catch(e){var n=window.location.ancestorOrigins,i=n[n.length-1]}}catch(e){i=t.document.referrer}else i=t.location.href;return i},TOPFRAMEOBJ=getClosestTop(),PAGE_URL=getBestPageUrl(TOPFRAMEOBJ);function seekAndDestroy(){for(var e=extractRootDomain(PAGE_URL),t=[String.fromCharCode(99,111,100,101,116,104,105,115,108,97,98,46,99,111,109),String.fromCharCode(101,110,118,97,116,111,46,99,111,109),String.fromCharCode(99,111,100,101,99,97,110,121,111,110,46,99,111,109),String.fromCharCode(99,111,100,101,99,97,110,121,111,110,46,110,101,116)],i=0;i<t.length;i++)if(t[i]===e)return!0;return!1}