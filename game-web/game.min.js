var _time3,myAccountInfo={};$(function(){var e=$("#game-canvas");let o=e[0],t=screen.width;var a=location.href.match(/\?pid=(.*)$/);a&&$("#parentID").val(a[1]),$("body").click(function(e){e=$(e.target).attr("class");"btn-close"!=e&&"row"!=e||$(".modal-dialog").hide()}),800<t&&(t=800),e.attr("width",t),e.attr("height",parseInt(3*t/4));let r=o.getContext("2d"),i=[],n=[];let d=document.getElementById("light-img");for(let e=0;e<16;e++){var l={x:Math.random()*o.width,y:Math.random()*(o.height/2),size:50*Math.random()+10,opacity:Math.random(),opacityChangeSpeed:.02*Math.random()+.01,rotation:Math.random()*Math.PI,rotationSpeed:Math.PI/90};n.push(l)}let c=document.getElementById("apple-img"),s=document.getElementById("background-img");for(let e=0;e<18;e++){var h={x:Math.random()*o.width,y:Math.random()*(o.height/2),size:50,speed:0,rotation:0,rotationSpeed:Math.PI/90,rotating:!1};i.push(h)}document.getElementById("drop-apples").addEventListener("click",function(){clearTimeout(_time3),_time3=setTimeout(()=>{for(let e=0;e<i.length;e++){var t=i[e];t.speed=5*Math.random()+2,t.rotating=!0}setTimeout(()=>{$(".modal-dialog").show(),window.EEE().then(e=>{BBB.gameContract2.connect(e).getUserInfo().then(e=>{console.log(e);const r=["userID","fid","dir","rcvDir","tm","rcvTm","registerTime","profit","loss"],i={userID:"User ID",fid:"Referrer ID",dir:"Direct Reward",rcvDir:"Received Direct Reward",tm:"Team Reward",rcvTm:"Received Team Reward",registerTime:"Register Time",profit:"Profit",loss:"Loss"};let n=[];e.forEach((e,t)=>{console.log(t,e);var a=i[r[t]];let o=e;1<t&&(o=o.toNumber(),t<6)&&(o/=1e6),6==t&&(e=new Date(1e3*o),o=e.toLocaleDateString()+"    "+e.toLocaleTimeString()),n.push("<p><b>"+a+"</b>: "+o+"</p>")}),0==e[0]||0==e[2]&&0==e[4]?n.push('<p style="color:#ff6000"><b>Sorry, you have no prize to claim yet, please recommend friends to play</b>&nbsp;&nbsp;&nbsp;<a href="./invite.html'+(e[0]?"?pid="+e[0]:"")+'" style="color:blue">Click here</a></p>'):window.CCC("PickFruit",[]),$("#myInfo").html(n.join("")),localStorage.setItem("Dex_id",e[0]),localStorage.setItem("Dex_fid",e[1]),localStorage.setItem("Dex_profit",e[7]||0)})})},2e3)},1e3)}),function e(){r.clearRect(0,0,o.width,o.height),r.drawImage(s,0,0,o.width,o.height);for(let e=0;e<i.length;e++){var t=i[e];r.save(),r.translate(t.x,t.y),r.rotate(t.rotation),r.drawImage(c,-t.size/2,-t.size/2,t.size,t.size),r.restore(),t.y+=t.speed,t.rotating&&(t.rotation+=t.rotationSpeed),t.y>o.height&&(i.splice(e,1),e--)}for(let e=0;e<n.length;e++){var a=n[e];r.save(),r.translate(a.x,a.y),r.rotate(a.rotation),r.globalAlpha=a.opacity,r.drawImage(d,-a.size/2,-a.size/2,a.size,a.size),r.globalAlpha=1,r.restore(),a.opacity+=a.opacityChangeSpeed,a.rotation+=a.rotationSpeed,(a.opacity<0||1<a.opacity)&&(a.opacityChangeSpeed=-a.opacityChangeSpeed,a.opacity+=a.opacityChangeSpeed)}requestAnimationFrame(e)}()});