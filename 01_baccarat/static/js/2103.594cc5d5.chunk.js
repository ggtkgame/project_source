"use strict";(self.webpackChunkgame1=self.webpackChunkgame1||[]).push([[2103],{61779:function(e,t,r){function n(e){return"string"===typeof e?Number.parseInt(e,"0x"===e.trim().substring(0,2)?16:10):"bigint"===typeof e?Number(e):e}r.d(t,{n:function(){return n}})},32103:function(e,t,r){r.r(t),r.d(t,{PaperChainMap:function(){return w},PaperWalletConnector:function(){return k}});var n=r(74165),a=r(15861),i=r(15671),s=r(43144),u=r(97326),c=r(60136),o=r(29388),l=r(3387),h=r(46170),p=r(63795),d=r(21410),f=r(97419),v=r(61779),w=(r(65892),{1:"Ethereum",5:"Goerli",137:"Polygon",80001:"Mumbai"}),m=new WeakMap,g=new WeakMap,k=function(e){(0,c.Z)(p,e);var t=(0,o.Z)(p);function p(e){var r;return(0,i.Z)(this,p),r=t.call(this),(0,h._)((0,u.Z)(r),"id","paper-wallet"),(0,h._)((0,u.Z)(r),"name","Paper Wallet"),(0,h._)((0,u.Z)(r),"ready",!0),(0,h._)((0,u.Z)(r),"user",null),(0,l._)((0,u.Z)(r),m,{writable:!0,value:void 0}),(0,h._)((0,u.Z)(r),"options",void 0),(0,l._)((0,u.Z)(r),g,{writable:!0,value:void 0}),(0,h._)((0,u.Z)(r),"onAccountsChanged",function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=5;break}return e.next=3,r.onDisconnect();case 3:e.next=6;break;case 5:r.emit("change",{account:f.getAddress(t[0])});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,h._)((0,u.Z)(r),"onChainChanged",(function(e){var t=(0,v.n)(e),n=r.isChainUnsupported(t);r.emit("change",{chain:{id:t,unsupported:n}})})),(0,h._)((0,u.Z)(r),"onDisconnect",(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.emit("disconnect");case 1:case"end":return e.stop()}}),e)})))),r.options=e,r}return(0,s.Z)(p,[{key:"getPaperSDK",value:function(){var e=this;return(0,l.b)(this,m)||(0,l.a)(this,m,new Promise(function(){var t=(0,a.Z)((0,n.Z)().mark((function t(a,i){var s,u,c;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.options.chain.chainId in w){t.next=3;break}throw new Error("Unsupported chain id: "+e.options.chain.chainId);case 3:return t.next=5,Promise.resolve().then(r.bind(r,21410));case 5:s=t.sent,u=s.PaperEmbeddedWalletSdk,c=w[e.options.chain.chainId],a(new u({clientId:e.options.clientId,chain:c})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),i(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}())),(0,l.b)(this,m)}},{key:"connect",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPaperSDK();case 2:if(t=e.sent){e.next=5;break}throw new Error("Paper SDK not initialized");case 5:return e.next=7,t.getUser();case 7:r=e.sent,e.t0=r.status,e.next=e.t0===d.UserStatus.LOGGED_OUT?11:e.t0===d.UserStatus.LOGGED_IN_WALLET_INITIALIZED?16:18;break;case 11:return e.next=13,t.auth.loginWithPaperModal();case 13:return a=e.sent,this.user=a.user,e.abrupt("break",18);case 16:return this.user=r,e.abrupt("break",18);case 18:if(this.user){e.next=20;break}throw new Error("Error connecting User");case 20:return this.setupListeners(),e.abrupt("return",this.getAddress());case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.user=null;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAddress",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSigner();case 2:return t=e.sent,e.abrupt("return",t.getAddress());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isConnected",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getAddress();case 3:return t=e.sent,e.abrupt("return",!!t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"getProvider",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSigner();case 2:if((t=e.sent).provider){e.next=5;break}throw new Error("Provider not found");case 5:return e.abrupt("return",t.provider);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSigner",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,r,a,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,l.b)(this,g)){e.next=2;break}return e.abrupt("return",(0,l.b)(this,g));case 2:if(this.user){e.next=14;break}return e.next=5,this.getPaperSDK();case 5:return r=e.sent,e.next=8,r.getUser();case 8:a=e.sent,e.t0=a.status,e.next=e.t0===d.UserStatus.LOGGED_IN_WALLET_INITIALIZED?12:14;break;case 12:return this.user=a,e.abrupt("break",14);case 14:return e.next=16,null===(t=this.user)||void 0===t?void 0:t.wallet.getEthersJsSigner({rpcEndpoint:this.options.chain.rpc[0]});case 16:if(i=e.sent){e.next=19;break}throw new Error("Signer not found");case 19:return(0,l.a)(this,g,i),e.abrupt("return",i);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isAuthorized",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"switchChain",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,i,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t in w){e.next=2;break}throw new Error("Chain not supported");case 2:if(i=w[t],s=this.options.chains.find((function(e){return e.chainId===t}))){e.next=6;break}throw new Error("Chain not configured");case 6:return e.next=8,null===(r=this.user)||void 0===r?void 0:r.wallet.setChain({chain:i});case 8:return e.t0=l.a,e.t1=this,e.t2=g,e.next=13,null===(a=this.user)||void 0===a?void 0:a.wallet.getEthersJsSigner({rpcEndpoint:s.rpc[0]});case 13:e.t3=e.sent,(0,e.t0)(e.t1,e.t2,e.t3),this.emit("change",{chain:{id:t,unsupported:!1}});case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupListeners",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getProvider();case 2:(t=e.sent).on&&(t.on("accountsChanged",this.onAccountsChanged),t.on("chainChanged",this.onChainChanged),t.on("disconnect",this.onDisconnect));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateChains",value:function(e){this.options.chains=e}},{key:"isChainUnsupported",value:function(e){return!(e in w)}},{key:"getEmail",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getProvider();case 2:if(this.user){e.next=4;break}throw new Error("No user found, Paper Wallet is not connected");case 4:return e.abrupt("return",this.user.authDetails.email);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),p}(p.T)},21410:function(e,t,r){r.r(t),r.d(t,{AUTH_TOKEN_LOCAL_STORAGE_NAME:function(){return D},AuthProvider:function(){return P},DEVICE_SHARE_LOCAL_STORAGE_NAME:function(){return T},DEVICE_SHARE_LOCAL_STORAGE_NAME_DEPRECATED:function(){return O},EMBEDDED_WALLET_PATH:function(){return L},PaperEmbeddedWalletSdk:function(){return J},UserStatus:function(){return C},UserWalletStatus:function(){return N},WALLET_USER_ID_LOCAL_STORAGE_NAME:function(){return A}});var n,a,i=r(97326),s=r(60136),u=r(29388),c=r(74165),o=r(15671),l=r(43144),h=r(37762),p=r(19626),d={Ethereum:"https://rpc.ankr.com/eth",Goerli:"https://eth-goerli.g.alchemy.com/v2/demo",Mumbai:"https://rpc-mumbai.maticvigil.com",Polygon:"https://rpc-mainnet.maticvigil.com",Avalanche:"https://api.avax.network/ext/bc/C/rpc"},f=function(){var e,t;return"undefined"!=typeof window&&"true"===window.localStorage.getItem("IS_PAPER_DEV")?null!=(e=window.localStorage.getItem("PAPER_DEV_URL"))?e:"http://localhost:3000":"undefined"!=typeof window&&window.location.origin.includes("zeet-paper.zeet.app")?null!=(t=null==p?void 0:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})&&t.ZEET_DEPLOYMENT_URL?"https://".concat({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.ZEET_DEPLOYMENT_URL):"undefined"!=typeof window?window.location.origin:"https://withpaper.com":"undefined"!=typeof window&&window.location.origin.includes("paper.xyz")?window.location.origin:"https://withpaper.com"},v=r(5829),w=r(68408),m=r(30520),g=Object.defineProperty,k=Object.defineProperties,I=Object.getOwnPropertyDescriptors,Z=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,b=function(e,t,r){return t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},y=function(e,t){for(var r in t||(t={}))x.call(t,r)&&b(e,r,t[r]);if(Z){var n,a=(0,h.Z)(Z(t));try{for(a.s();!(n=a.n()).done;){r=n.value;E.call(t,r)&&b(e,r,t[r])}}catch(i){a.e(i)}finally{a.f()}}return e},_=function(e,t){return k(e,I(t))},S=function(e,t,r){return new Promise((function(n,a){var i=function(e){try{u(r.next(e))}catch(t){a(t)}},s=function(e){try{u(r.throw(e))}catch(t){a(t)}},u=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(i,s)};u((r=r.apply(e,t)).next())}))},L="/sdk/2022-08-12/embedded-wallet",A=function(e){return"paperEwsWalletUserId-".concat(e)},D=function(e){return"".concat("walletToken","-").concat(e)},T=function(e,t){return"".concat("a","-").concat(e,"-").concat(t)},O=function(e){return"".concat("a","-").concat(e)},P=((n=P||{}).PAPER_EMAIL_OTP="PaperEmailOTP",n.GOOGLE="Google",n.AUTH0="Auth0",n.CUSTOM_JWT="CustomJWT",n),C=((a=C||{}).LOGGED_OUT="Logged Out",a.LOGGED_IN_WALLET_INITIALIZED="Logged In, Wallet Initialized",a),N=function(e){return e.LOGGED_OUT="Logged Out",e.LOGGED_IN_WALLET_UNINITIALIZED="Logged In, Wallet Uninitialized",e.LOGGED_IN_NEW_DEVICE="Logged In, New Device",e.LOGGED_IN_WALLET_INITIALIZED="Logged In, Wallet Initialized",e}(N||{}),U=new Map,W=function(){function e(t){var r=t.clientId;(0,o.Z)(this,e),this.isSupported="undefined"!=typeof window&&!!window.localStorage,this.clientId=r}return(0,l.Z)(e,[{key:"getItem",value:function(e){return S(this,null,(0,c.Z)().mark((function t(){var r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.isSupported?window.localStorage.getItem(e):null!=(r=U.get(e))?r:null);case 1:case"end":return t.stop()}}),t,this)})))}},{key:"setItem",value:function(e,t){return S(this,null,(0,c.Z)().mark((function r(){return(0,c.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.isSupported){r.next=2;break}return r.abrupt("return",window.localStorage.setItem(e,t));case 2:U.set(e,t);case 3:case"end":return r.stop()}}),r,this)})))}},{key:"removeItem",value:function(e){return S(this,null,(0,c.Z)().mark((function t(){var r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getItem(e);case 2:return r=t.sent,t.abrupt("return",!(!this.isSupported||!r)&&(window.localStorage.removeItem(e),!0));case 4:case"end":return t.stop()}}),t,this)})))}},{key:"saveAuthCookie",value:function(e){return S(this,null,(0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setItem(D(this.clientId),e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"getAuthCookie",value:function(){return S(this,null,(0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getItem(D(this.clientId)));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"removeAuthCookie",value:function(){return S(this,null,(0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.removeItem(D(this.clientId)));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"saveDeviceShare",value:function(e,t){return S(this,null,(0,c.Z)().mark((function r(){return(0,c.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.saveWalletUserId(t);case 2:return r.next=4,this.setItem(T(this.clientId,t),e);case 4:case"end":return r.stop()}}),r,this)})))}},{key:"getDeviceShare",value:function(){return S(this,null,(0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getWalletUserId();case 2:return t=e.sent,e.abrupt("return",t?this.getItem(T(this.clientId,t)):null);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"removeDeviceShare",value:function(){return S(this,null,(0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getWalletUserId();case 2:return t=e.sent,e.abrupt("return",!!t&&this.removeItem(T(this.clientId,t)));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getWalletUserId",value:function(){return S(this,null,(0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getItem(A(this.clientId)));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"saveWalletUserId",value:function(e){return S(this,null,(0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setItem(A(this.clientId),e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"removeWalletUserId",value:function(){return S(this,null,(0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.removeItem(A(this.clientId)));case 1:case"end":return e.stop()}}),e,this)})))}}]),e}();function M(e){return new Promise((function(t){setTimeout(t,1e3*e)}))}var R={height:"100%",width:"100%",border:"none",backgroundColor:"transparent",position:"fixed",top:"0px",right:"0px",zIndex:"2147483646",display:"none"},G=new Map,q=function(){function e(t){var r=t.link,n=t.iframeId,a=t.container,i=void 0===a?document.body:a,s=t.iframeStyles,u=t.onIframeInitialize;(0,o.Z)(this,e),this.POLLING_INTERVAL_SECONDS=1.4,this.POST_LOAD_BUFFER_SECONDS=1;var c=document.getElementById(n),l=new URL(r),h="0.0.26";if(l.searchParams.set("sdkVersion",h),!c||c.src!=l.href){if(!c){c=document.createElement("iframe");var p=y(y({},R),s);Object.assign(c.style,p),c.setAttribute("id",n),i.appendChild(c)}c.src=l.href,c.setAttribute("data-version",h),c.onload=this.onIframeLoadHandler(c,this.POST_LOAD_BUFFER_SECONDS,u)}this.iframe=c}return(0,l.Z)(e,[{key:"onIframeLoadedInitVariables",value:function(){return S(this,null,(0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})))}},{key:"onIframeLoadHandler",value:function(e,t,r){var n=this;return function(){return S(n,null,(0,c.Z)().mark((function n(){var a=this;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,new Promise((function(n,i){return S(a,null,(0,c.Z)().mark((function a(){var s,u;return(0,c.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(u=new MessageChannel).port1.onmessage=function(t){var a=t.data;return u.port1.close(),a.success?(G.set(e.src,!0),r&&r(),n(!0)):i(a.error)},a.next=4,M(t);case 4:if("initIframe",a.t0=null==(s=null==e?void 0:e.contentWindow),a.t0){a.next=16;break}return a.t1=s,a.t2="initIframe",a.next=11,this.onIframeLoadedInitVariables();case 11:a.t3=a.sent,a.t4={eventType:a.t2,data:a.t3},a.t5="".concat(f()).concat(L),a.t6=[u.port2],a.t1.postMessage.call(a.t1,a.t4,a.t5,a.t6);case 16:case"end":return a.stop()}}),a,this)})))}));case 2:case"end":return n.stop()}}),n)})))}}},{key:"call",value:function(e){return S(this,arguments,(function(e){var t=this,r=e.procedureName,n=e.params,a=e.showIframe,i=void 0!==a&&a;return(0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G.get(t.iframe.src)){e.next=5;break}return e.next=3,M(t.POLLING_INTERVAL_SECONDS);case 3:e.next=0;break;case 5:if(e.t0=i,!e.t0){e.next=10;break}return t.iframe.style.display="block",e.next=10,M(.005);case 10:return e.abrupt("return",new Promise((function(e,a){var s,u=new MessageChannel;u.port1.onmessage=function(r){return S(t,null,(0,c.Z)().mark((function t(){var n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.data,u.port1.close(),t.t0=i,!t.t0){t.next=7;break}return t.next=6,M(.1);case 6:this.iframe.style.display="none";case 7:n.success?e(n.data):a(n.error);case 8:case"end":return t.stop()}}),t,this)})))},null==(s=t.iframe.contentWindow)||s.postMessage({eventType:r,data:n},"".concat(f()).concat(L),[u.port2])})));case 11:case"end":return e.stop()}}),e)}))()}))}},{key:"destroy",value:function(){G.delete(this.iframe.src)}}]),e}(),H=function(e){(0,s.Z)(r,e);var t=(0,u.Z)(r);function r(e){var n,a=e.clientId,i=e.customizationOptions;return(0,o.Z)(this,r),(n=t.call(this,{iframeId:V,link:z({clientId:a,path:L,queryParams:i}).href,container:document.body})).clientId=a,n}return(0,l.Z)(r,[{key:"onIframeLoadedInitVariables",value:function(){return S(this,null,(0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new W({clientId:this.clientId}),e.next=3,t.getAuthCookie();case 3:return e.t0=e.sent,e.next=6,t.getDeviceShare();case 6:return e.t1=e.sent,e.next=9,t.getWalletUserId();case 9:return e.t2=e.sent,e.t3=this.clientId,e.abrupt("return",{authCookie:e.t0,deviceShareStored:e.t1,walletUserId:e.t2,clientId:e.t3});case 12:case"end":return e.stop()}}),e,this)})))}}]),r}(q);function z(e){var t,r=e.clientId,n=e.path,a=e.queryParams,i=new URL(n,f());if(i.searchParams.set("clientId",r),a)for(var s=0,u=Object.keys(a);s<u.length;s++){var c=u[s];i.searchParams.set(c,(null==(t=a[c])?void 0:t.toString())||"")}return i}var V="paper-embedded-wallet-iframe",Q=function(){function e(t){var r=t.clientId,n=t.querier,a=t.onAuthSuccess;(0,o.Z)(this,e),this.clientId=r,this.AuthQuerier=n,this.localStorage=new W({clientId:r}),this.onAuthSuccess=a}return(0,l.Z)(e,[{key:"postLogin",value:function(e){return S(this,arguments,(function(e){var t=this,r=e.storedToken,n=e.walletDetails;return(0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r.shouldStoreCookieString,!e.t0){e.next=4;break}return e.next=4,t.localStorage.saveAuthCookie(r.cookieString);case 4:return e.next=6,t.onAuthSuccess({storedToken:r,walletDetails:n});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)}))()}))}},{key:"loginWithJwtAuth",value:function(e){return S(this,arguments,(function(e){var t=this,r=e.token,n=e.authProvider,a=e.recoveryCode;return(0,c.Z)().mark((function e(){var i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.AuthQuerier.call({procedureName:"loginWithJwtAuthCallback",params:{token:r,authProvider:n,recoveryCode:a}});case 2:return i=e.sent,e.abrupt("return",t.postLogin(i));case 4:case"end":return e.stop()}}),e)}))()}))}},{key:"loginWithPaperModal",value:function(){return S(this,null,(0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.AuthQuerier.call({procedureName:"loginWithPaperModal",params:void 0,showIframe:!0});case 2:return t=e.sent,e.abrupt("return",this.postLogin(t));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"loginWithPaperEmailOtp",value:function(e){return S(this,arguments,(function(e){var t=this,r=e.email;return(0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.AuthQuerier.call({procedureName:"loginWithPaperModal",params:{email:r},showIframe:!0});case 2:return n=e.sent,e.abrupt("return",t.postLogin(n));case 4:case"end":return e.stop()}}),e)}))()}))}},{key:"sendPaperEmailLoginOtp",value:function(e){return S(this,arguments,(function(e){var t=this,r=e.email;return(0,c.Z)().mark((function e(){var n,a,i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.AuthQuerier.call({procedureName:"sendPaperEmailLoginOtp",params:{email:r}});case 2:return n=e.sent,a=n.isNewUser,i=n.isNewDevice,e.abrupt("return",{isNewUser:a,isNewDevice:i});case 6:case"end":return e.stop()}}),e)}))()}))}},{key:"verifyPaperEmailLoginOtp",value:function(e){return S(this,arguments,(function(e){var t=this,r=e.email,n=e.otp,a=e.recoveryCode;return(0,c.Z)().mark((function e(){var i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.AuthQuerier.call({procedureName:"verifyPaperEmailLoginOtp",params:{email:r,otp:n,recoveryCode:a}});case 2:return i=e.sent,e.abrupt("return",t.postLogin(i));case 4:case"end":return e.stop()}}),e)}))()}))}},{key:"logout",value:function(){return S(this,null,(0,c.Z)().mark((function e(){var t,r,n,a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.AuthQuerier.call({procedureName:"logout",params:void 0});case 2:return t=e.sent,r=t.success,e.next=6,this.localStorage.removeAuthCookie();case 6:return n=e.sent,e.next=9,this.localStorage.removeWalletUserId();case 9:return a=e.sent,e.abrupt("return",{success:r||n||a});case 11:case"end":return e.stop()}}),e,this)})))}}]),e}(),F=function(){function e(t){var r=t.chain,n=t.clientId,a=t.querier;(0,o.Z)(this,e),this.chain=r,this.clientId=n,this.gaslessTransactionQuerier=a}return(0,l.Z)(e,[{key:"callContract",value:function(e){return S(this,arguments,(function(e){var t=this,r=e.contractAddress,n=e.methodArgs,a=e.methodInterface;return(0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.gaslessTransactionQuerier.call({procedureName:"callContract",params:{chain:t.chain,contractAddress:r,method:{args:n,stub:a}}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))()}))}}]),e}(),K=function(e){(0,s.Z)(r,e);var t=(0,u.Z)(r);function r(e){var n,a=e.provider,s=e.clientId,u=e.querier;return(0,o.Z)(this,r),(n=t.call(this)).DEFAULT_ETHEREUM_CHAIN_ID=1,n.clientId=s,n.querier=u,(0,m.defineReadOnly)((0,i.Z)(n),"provider",a),n}return(0,l.Z)(r,[{key:"getAddress",value:function(){return S(this,null,(0,c.Z)().mark((function e(){var t,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.querier.call({procedureName:"getAddress",params:void 0});case 2:return t=e.sent,r=t.address,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"signMessage",value:function(e){return S(this,null,(0,c.Z)().mark((function t(){var r,n,a,i,s;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.querier,t.t1=e,t.next=4,null==(r=this.provider)?void 0:r.getNetwork();case 4:if(t.t2=n=t.sent,null!=t.t2){t.next=9;break}t.t3=void 0,t.next=10;break;case 9:t.t3=n.chainId;case 10:if(t.t4=a=t.t3,null==t.t4){t.next=15;break}t.t5=a,t.next=16;break;case 15:t.t5=this.DEFAULT_ETHEREUM_CHAIN_ID;case 16:return t.t6=t.t5,t.t7={message:t.t1,chainId:t.t6},t.t8={procedureName:"signMessage",params:t.t7},t.next=21,t.t0.call.call(t.t0,t.t8);case 21:return i=t.sent,s=i.signedMessage,t.abrupt("return",s);case 24:case"end":return t.stop()}}),t,this)})))}},{key:"signTransaction",value:function(e){return S(this,null,(0,c.Z)().mark((function t(){var r,n,a,i,s;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.querier,t.t1=e,t.next=4,null==(r=this.provider)?void 0:r.getNetwork();case 4:if(t.t2=n=t.sent,null!=t.t2){t.next=9;break}t.t3=void 0,t.next=10;break;case 9:t.t3=n.chainId;case 10:if(t.t4=a=t.t3,null==t.t4){t.next=15;break}t.t5=a,t.next=16;break;case 15:t.t5=this.DEFAULT_ETHEREUM_CHAIN_ID;case 16:return t.t6=t.t5,t.t7={transaction:t.t1,chainId:t.t6},t.t8={procedureName:"signTransaction",params:t.t7},t.next=21,t.t0.call.call(t.t0,t.t8);case 21:return i=t.sent,s=i.signedTransaction,t.abrupt("return",s);case 24:case"end":return t.stop()}}),t,this)})))}},{key:"_signTypedData",value:function(e,t,r){return S(this,null,(0,c.Z)().mark((function n(){var a,i,s,u,o;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=this.querier,n.t1=e,n.t2=t,n.t3=r,n.next=6,null==(a=this.provider)?void 0:a.getNetwork();case 6:if(n.t4=i=n.sent,null!=n.t4){n.next=11;break}n.t5=void 0,n.next=12;break;case 11:n.t5=i.chainId;case 12:if(n.t6=s=n.t5,null==n.t6){n.next=17;break}n.t7=s,n.next=18;break;case 17:n.t7=this.DEFAULT_ETHEREUM_CHAIN_ID;case 18:return n.t8=n.t7,n.t9={domain:n.t1,types:n.t2,message:n.t3,chainId:n.t8},n.t10={procedureName:"signTypedDataV4",params:n.t9},n.next=23,n.t0.call.call(n.t0,n.t10);case 23:return u=n.sent,o=u.signedTypedData,n.abrupt("return",o);case 26:case"end":return n.stop()}}),n,this)})))}},{key:"connect",value:function(e){return new r({clientId:this.clientId,provider:e,querier:this.querier})}}]),r}(w.Signer),j=function(){function e(t){var r=t.clientId,n=t.chain,a=t.querier;(0,o.Z)(this,e),this.clientId=r,this.chain=n,this.walletManagerQuerier=a,this.gasless=new F({chain:n,clientId:r,querier:a}),this.localStorage=new W({clientId:r})}return(0,l.Z)(e,[{key:"postWalletSetUp",value:function(e){return S(this,arguments,(function(e){var t=this,r=e.deviceShareStored,n=e.walletAddress,a=e.isIframeStorageEnabled,i=e.walletUserId;return(0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=a,e.t0){e.next=4;break}return e.next=4,t.localStorage.saveDeviceShare(r,i);case 4:return e.abrupt("return",{walletAddress:n});case 5:case"end":return e.stop()}}),e)}))()}))}},{key:"getUserWalletStatus",value:function(){return S(this,null,(0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.walletManagerQuerier.call({procedureName:"getUserStatus",params:void 0});case 2:return t=e.sent,e.abrupt("return","Logged In, Wallet Initialized"===t.status?{status:"Logged In, Wallet Initialized",user:_(y({},t.user),{wallet:this})}:t);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"setChain",value:function(e){return S(this,arguments,(function(e){var t=this,r=e.chain;return(0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.chain=r,t.gasless=new F({chain:r,clientId:t.clientId,querier:t.walletManagerQuerier});case 1:case"end":return e.stop()}}),e)}))()}))}},{key:"getEthersJsSigner",value:function(e){return S(this,null,(0,c.Z)().mark((function t(){var r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new K({clientId:this.clientId,provider:(0,v.getDefaultProvider)(null!=(r=null==e?void 0:e.rpcEndpoint)?r:d[this.chain]),querier:this.walletManagerQuerier}));case 1:case"end":return t.stop()}}),t,this)})))}}]),e}(),J=function(){function e(t){var r=this,n=t.clientId,a=t.chain,i=t.styles;(0,o.Z)(this,e),this.clientId=n,this.querier=new H({clientId:n,customizationOptions:i}),this.wallet=new j({clientId:n,chain:a,querier:this.querier}),this.auth=new Q({clientId:n,querier:this.querier,onAuthSuccess:function(e){return S(r,null,(0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.wallet.postWalletSetUp(_(y({},e.walletDetails),{walletUserId:e.storedToken.authDetails.userWalletId}));case 2:return t.abrupt("return",{user:{status:"Logged In, Wallet Initialized",authDetails:e.storedToken.authDetails,wallet:this.wallet,walletAddress:e.walletDetails.walletAddress}});case 3:case"end":return t.stop()}}),t,this)})))}})}return(0,l.Z)(e,[{key:"getUser",value:function(){return S(this,null,(0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.wallet.getUserWalletStatus();case 2:t=e.sent,e.t0=t.status,e.next="Logged In, New Device"===e.t0||"Logged In, Wallet Uninitialized"===e.t0?6:"Logged Out"===e.t0?9:"Logged In, Wallet Initialized"===e.t0?10:11;break;case 6:return e.next=8,this.auth.logout();case 8:return e.abrupt("return",this.getUser());case 9:return e.abrupt("return",{status:"Logged Out"});case 10:return e.abrupt("return",y({status:"Logged In, Wallet Initialized"},t.user));case 11:case"end":return e.stop()}}),e,this)})))}}]),e}()}}]);
//# sourceMappingURL=2103.594cc5d5.chunk.js.map